/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/[...nextauth]/route";
exports.ids = ["app/api/auth/[...nextauth]/route"];
exports.modules = {

/***/ "(rsc)/./app/api/auth/[...nextauth]/route.ts":
/*!*********************************************!*\
  !*** ./app/api/auth/[...nextauth]/route.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n\nconst { GET, POST } = _lib_auth__WEBPACK_IMPORTED_MODULE_0__.handlers;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUM7QUFFOUIsTUFBTSxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRSxHQUFHRiwrQ0FBUUEsQ0FBQSIsInNvdXJjZXMiOlsiQzpcXHhhbXBwXFxodGRvY3NcXGdyYWt5IHN0b3JlIHdlYlxcYXBwXFxhcGlcXGF1dGhcXFsuLi5uZXh0YXV0aF1cXHJvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGhhbmRsZXJzIH0gZnJvbSAnQC9saWIvYXV0aCdcclxuXHJcbmV4cG9ydCBjb25zdCB7IEdFVCwgUE9TVCB9ID0gaGFuZGxlcnNcclxuIl0sIm5hbWVzIjpbImhhbmRsZXJzIiwiR0VUIiwiUE9TVCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/[...nextauth]/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   authConfig: () => (/* binding */ authConfig),\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   handlers: () => (/* binding */ handlers)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/google */ \"(rsc)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./db */ \"(rsc)/./lib/db.ts\");\n\n\n\n\n\nconst IS_DEV = \"development\" === 'development';\nconst authConfig = {\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            name: 'Credentials',\n            credentials: {\n                email: {\n                    label: 'Email',\n                    type: 'email'\n                },\n                password: {\n                    label: 'Password',\n                    type: 'password'\n                }\n            },\n            async authorize (credentials) {\n                console.log('[Auth] Login attempt for:', credentials?.email);\n                if (!credentials?.email || !credentials?.password) {\n                    console.log('[Auth] Missing credentials');\n                    return null;\n                }\n                try {\n                    const email = String(credentials.email).toLowerCase().trim();\n                    const password = String(credentials.password);\n                    // Basic email validation\n                    if (!email.includes('@')) {\n                        console.log('[Auth] Invalid email format');\n                        return null;\n                    }\n                    // Fetch user from database\n                    const user = await (0,_db__WEBPACK_IMPORTED_MODULE_4__.getUserByEmail)(email);\n                    if (!user) {\n                        console.log('[Auth] User not found:', email);\n                        return null;\n                    }\n                    // Check if user is active\n                    if (!user.isActive) {\n                        console.log('[Auth] User account is inactive');\n                        return null;\n                    }\n                    // Verify password\n                    const isPasswordValid = await (0,bcryptjs__WEBPACK_IMPORTED_MODULE_3__.compare)(password, user.password);\n                    if (!isPasswordValid) {\n                        console.log('[Auth] Invalid password');\n                        return null;\n                    }\n                    console.log('[Auth] Login successful for:', user.email);\n                    return {\n                        id: user.id,\n                        email: user.email,\n                        name: user.name,\n                        role: user.role || 'USER'\n                    };\n                } catch (error) {\n                    console.error('[Auth] Error during login:', error);\n                    // Throw specific errors for better UX\n                    if (error.code === 'ECONNREFUSED') {\n                        throw new Error('DATABASE_CONNECTION_ERROR');\n                    }\n                    if (error.code === 'ETIMEDOUT' || error.code === 'ENOTFOUND') {\n                        throw new Error('DATABASE_ERROR');\n                    }\n                    throw error;\n                }\n            }\n        }),\n        (0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n            clientId: process.env.GOOGLE_CLIENT_ID || '',\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET || ''\n        })\n    ],\n    pages: {\n        signIn: '/auth/login',\n        error: '/auth/login'\n    },\n    callbacks: {\n        async signIn ({ user, account }) {\n            console.log('[Auth] signIn callback - provider:', account?.provider);\n            if (account?.provider === 'google') {\n                try {\n                    const { email, name } = user;\n                    if (!email) {\n                        console.error('[Auth] Google login: No email provided');\n                        return false;\n                    }\n                    const existingUser = await (0,_db__WEBPACK_IMPORTED_MODULE_4__.getUserByEmail)(email);\n                    if (!existingUser) {\n                        // Create new user for Google OAuth\n                        console.log('[Auth] Creating new user from Google login:', email);\n                        const randomPassword = Math.random().toString(36).slice(-12);\n                        const hashedPassword = await (0,bcryptjs__WEBPACK_IMPORTED_MODULE_3__.hash)(randomPassword, 10);\n                        const newUser = await (0,_db__WEBPACK_IMPORTED_MODULE_4__.createUser)(name || 'Google User', email, hashedPassword, 'USER');\n                        user.id = newUser.id;\n                        user.role = newUser.role;\n                        console.log('[Auth] New user created:', newUser.id);\n                    } else {\n                        ;\n                        user.id = existingUser.id;\n                        user.role = existingUser.role;\n                        console.log('[Auth] Existing user logged in:', existingUser.id);\n                    }\n                    return true;\n                } catch (error) {\n                    console.error('[Auth] Error in Google signIn:', error);\n                    return false;\n                }\n            }\n            return true;\n        },\n        async jwt ({ token, user }) {\n            if (user) {\n                token.id = user.id;\n                token.email = user.email;\n                token.name = user.name;\n                token.role = user.role || 'USER';\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (session.user) {\n                session.user.id = token.id;\n                session.user.email = token.email;\n                session.user.name = token.name;\n                session.user.role = token.role;\n            }\n            return session;\n        }\n    },\n    session: {\n        strategy: 'jwt',\n        maxAge: 24 * 60 * 60\n    },\n    jwt: {\n        maxAge: 24 * 60 * 60\n    },\n    cookies: {\n        sessionToken: {\n            name:  false ? 0 : 'next-auth.session-token',\n            options: {\n                httpOnly: true,\n                sameSite: 'lax',\n                path: '/',\n                secure: \"development\" === 'production'\n            }\n        }\n    },\n    debug: IS_DEV,\n    trustHost: true\n};\nconst { handlers, auth } = (0,next_auth__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(authConfig);\nconst authOptions = authConfig;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVELEtBQUssRUFBRTtZQUM5QixJQUFJQyxRQUFRNUIsSUFBSSxFQUFFO2dCQUNoQjRCLFFBQVE1QixJQUFJLENBQUNHLEVBQUUsR0FBR3dCLE1BQU14QixFQUFFO2dCQUMxQnlCLFFBQVE1QixJQUFJLENBQUNYLEtBQUssR0FBR3NDLE1BQU10QyxLQUFLO2dCQUNoQ3VDLFFBQVE1QixJQUFJLENBQUNiLElBQUksR0FBR3dDLE1BQU14QyxJQUFJO2dCQUN6QnlDLFFBQVE1QixJQUFJLENBQVNJLElBQUksR0FBR3VCLE1BQU12QixJQUFJO1lBQzdDO1lBQ0EsT0FBT3dCO1FBQ1Q7SUFDRjtJQUNBQSxTQUFTO1FBQ1BDLFVBQVU7UUFDVkMsUUFBUSxLQUFLLEtBQUs7SUFDcEI7SUFDQUosS0FBSztRQUNISSxRQUFRLEtBQUssS0FBSztJQUNwQjtJQUNBQyxTQUFTO1FBQ1BDLGNBQWM7WUFDWjdDLE1BQU1ILE1BQXFDLEdBQ3ZDLENBQWtDLEdBQ2xDO1lBQ0ppRCxTQUFTO2dCQUNQQyxVQUFVO2dCQUNWQyxVQUFVO2dCQUNWQyxNQUFNO2dCQUNOQyxRQUFRckQsa0JBQXlCO1lBQ25DO1FBQ0Y7SUFDRjtJQUNBc0QsT0FBT3ZEO0lBQ1B3RCxXQUFXO0FBQ2IsRUFBQztBQUVNLE1BQU0sRUFBRUMsUUFBUSxFQUFFQyxJQUFJLEVBQUUsR0FBR2pFLHFEQUFRQSxDQUFDUyxZQUFXO0FBQy9DLE1BQU15RCxjQUFjekQsV0FBVSIsInNvdXJjZXMiOlsiQzpcXHhhbXBwXFxodGRvY3NcXGdyYWt5IHN0b3JlIHdlYlxcbGliXFxhdXRoLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEF1dGhDb25maWcgfSBmcm9tICduZXh0LWF1dGgnXHJcbmltcG9ydCBOZXh0QXV0aCBmcm9tICduZXh0LWF1dGgnXHJcbmltcG9ydCBDcmVkZW50aWFsc1Byb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvY3JlZGVudGlhbHMnXHJcbmltcG9ydCBHb29nbGVQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2dvb2dsZSdcclxuaW1wb3J0IHsgY29tcGFyZSwgaGFzaCB9IGZyb20gJ2JjcnlwdGpzJ1xyXG5pbXBvcnQgeyBnZXRVc2VyQnlFbWFpbCwgY3JlYXRlVXNlciB9IGZyb20gJy4vZGInXHJcblxyXG5jb25zdCBJU19ERVYgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50J1xyXG5cclxuZXhwb3J0IGNvbnN0IGF1dGhDb25maWc6IE5leHRBdXRoQ29uZmlnID0ge1xyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XHJcbiAgICAgIG5hbWU6ICdDcmVkZW50aWFscycsXHJcbiAgICAgIGNyZWRlbnRpYWxzOiB7XHJcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6ICdFbWFpbCcsIHR5cGU6ICdlbWFpbCcgfSxcclxuICAgICAgICBwYXNzd29yZDogeyBsYWJlbDogJ1Bhc3N3b3JkJywgdHlwZTogJ3Bhc3N3b3JkJyB9LFxyXG4gICAgICB9LFxyXG4gICAgICBhc3luYyBhdXRob3JpemUoY3JlZGVudGlhbHMpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnW0F1dGhdIExvZ2luIGF0dGVtcHQgZm9yOicsIGNyZWRlbnRpYWxzPy5lbWFpbClcclxuXHJcbiAgICAgICAgaWYgKCFjcmVkZW50aWFscz8uZW1haWwgfHwgIWNyZWRlbnRpYWxzPy5wYXNzd29yZCkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1tBdXRoXSBNaXNzaW5nIGNyZWRlbnRpYWxzJylcclxuICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgZW1haWwgPSBTdHJpbmcoY3JlZGVudGlhbHMuZW1haWwpLnRvTG93ZXJDYXNlKCkudHJpbSgpXHJcbiAgICAgICAgICBjb25zdCBwYXNzd29yZCA9IFN0cmluZyhjcmVkZW50aWFscy5wYXNzd29yZClcclxuXHJcbiAgICAgICAgICAvLyBCYXNpYyBlbWFpbCB2YWxpZGF0aW9uXHJcbiAgICAgICAgICBpZiAoIWVtYWlsLmluY2x1ZGVzKCdAJykpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tBdXRoXSBJbnZhbGlkIGVtYWlsIGZvcm1hdCcpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gRmV0Y2ggdXNlciBmcm9tIGRhdGFiYXNlXHJcbiAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0VXNlckJ5RW1haWwoZW1haWwpXHJcblxyXG4gICAgICAgICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQXV0aF0gVXNlciBub3QgZm91bmQ6JywgZW1haWwpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBhY3RpdmVcclxuICAgICAgICAgIGlmICghdXNlci5pc0FjdGl2ZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW0F1dGhdIFVzZXIgYWNjb3VudCBpcyBpbmFjdGl2ZScpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gVmVyaWZ5IHBhc3N3b3JkXHJcbiAgICAgICAgICBjb25zdCBpc1Bhc3N3b3JkVmFsaWQgPSBhd2FpdCBjb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKVxyXG5cclxuICAgICAgICAgIGlmICghaXNQYXNzd29yZFZhbGlkKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQXV0aF0gSW52YWxpZCBwYXNzd29yZCcpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1tBdXRoXSBMb2dpbiBzdWNjZXNzZnVsIGZvcjonLCB1c2VyLmVtYWlsKVxyXG5cclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlkOiB1c2VyLmlkLFxyXG4gICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxyXG4gICAgICAgICAgICByb2xlOiB1c2VyLnJvbGUgfHwgJ1VTRVInLFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tBdXRoXSBFcnJvciBkdXJpbmcgbG9naW46JywgZXJyb3IpXHJcblxyXG4gICAgICAgICAgLy8gVGhyb3cgc3BlY2lmaWMgZXJyb3JzIGZvciBiZXR0ZXIgVVhcclxuICAgICAgICAgIGlmIChlcnJvci5jb2RlID09PSAnRUNPTk5SRUZVU0VEJykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RBVEFCQVNFX0NPTk5FQ1RJT05fRVJST1InKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICdFVElNRURPVVQnIHx8IGVycm9yLmNvZGUgPT09ICdFTk9URk9VTkQnKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignREFUQUJBU0VfRVJST1InKVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHRocm93IGVycm9yXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSksXHJcbiAgICBHb29nbGVQcm92aWRlcih7XHJcbiAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX0lEIHx8ICcnLFxyXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfU0VDUkVUIHx8ICcnLFxyXG4gICAgfSksXHJcbiAgXSxcclxuICBwYWdlczoge1xyXG4gICAgc2lnbkluOiAnL2F1dGgvbG9naW4nLFxyXG4gICAgZXJyb3I6ICcvYXV0aC9sb2dpbicsXHJcbiAgfSxcclxuICBjYWxsYmFja3M6IHtcclxuICAgIGFzeW5jIHNpZ25Jbih7IHVzZXIsIGFjY291bnQgfSkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW0F1dGhdIHNpZ25JbiBjYWxsYmFjayAtIHByb3ZpZGVyOicsIGFjY291bnQ/LnByb3ZpZGVyKVxyXG5cclxuICAgICAgaWYgKGFjY291bnQ/LnByb3ZpZGVyID09PSAnZ29vZ2xlJykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCB7IGVtYWlsLCBuYW1lIH0gPSB1c2VyXHJcblxyXG4gICAgICAgICAgaWYgKCFlbWFpbCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gR29vZ2xlIGxvZ2luOiBObyBlbWFpbCBwcm92aWRlZCcpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGdldFVzZXJCeUVtYWlsKGVtYWlsKVxyXG5cclxuICAgICAgICAgIGlmICghZXhpc3RpbmdVc2VyKSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBuZXcgdXNlciBmb3IgR29vZ2xlIE9BdXRoXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQXV0aF0gQ3JlYXRpbmcgbmV3IHVzZXIgZnJvbSBHb29nbGUgbG9naW46JywgZW1haWwpXHJcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbVBhc3N3b3JkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoLTEyKVxyXG4gICAgICAgICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGhhc2gocmFuZG9tUGFzc3dvcmQsIDEwKVxyXG4gICAgICAgICAgICBjb25zdCBuZXdVc2VyID0gYXdhaXQgY3JlYXRlVXNlcihuYW1lIHx8ICdHb29nbGUgVXNlcicsIGVtYWlsLCBoYXNoZWRQYXNzd29yZCwgJ1VTRVInKVxyXG5cclxuICAgICAgICAgICAgICAvLyBDYXN0IHRvIGFueSB0byBhdm9pZCBUUyBlcnJvciB3aXRoIE5leHRBdXRoIHR5cGVzXHJcbiAgICAgICAgICAgICAgOyAodXNlciBhcyBhbnkpLmlkID0gbmV3VXNlci5pZFxyXG4gICAgICAgICAgICAgIDsgKHVzZXIgYXMgYW55KS5yb2xlID0gbmV3VXNlci5yb2xlXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQXV0aF0gTmV3IHVzZXIgY3JlYXRlZDonLCBuZXdVc2VyLmlkKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgOyAodXNlciBhcyBhbnkpLmlkID0gZXhpc3RpbmdVc2VyLmlkXHJcbiAgICAgICAgICAgICAgOyAodXNlciBhcyBhbnkpLnJvbGUgPSBleGlzdGluZ1VzZXIucm9sZVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW0F1dGhdIEV4aXN0aW5nIHVzZXIgbG9nZ2VkIGluOicsIGV4aXN0aW5nVXNlci5pZClcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gRXJyb3IgaW4gR29vZ2xlIHNpZ25JbjonLCBlcnJvcilcclxuICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHRydWVcclxuICAgIH0sXHJcbiAgICBhc3luYyBqd3QoeyB0b2tlbiwgdXNlciB9KSB7XHJcbiAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgdG9rZW4uaWQgPSB1c2VyLmlkXHJcbiAgICAgICAgdG9rZW4uZW1haWwgPSB1c2VyLmVtYWlsXHJcbiAgICAgICAgdG9rZW4ubmFtZSA9IHVzZXIubmFtZVxyXG4gICAgICAgIHRva2VuLnJvbGUgPSAodXNlciBhcyBhbnkpLnJvbGUgfHwgJ1VTRVInXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRva2VuXHJcbiAgICB9LFxyXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcclxuICAgICAgaWYgKHNlc3Npb24udXNlcikge1xyXG4gICAgICAgIHNlc3Npb24udXNlci5pZCA9IHRva2VuLmlkIGFzIHN0cmluZ1xyXG4gICAgICAgIHNlc3Npb24udXNlci5lbWFpbCA9IHRva2VuLmVtYWlsIGFzIHN0cmluZ1xyXG4gICAgICAgIHNlc3Npb24udXNlci5uYW1lID0gdG9rZW4ubmFtZSBhcyBzdHJpbmdcclxuICAgICAgICAgIDsgKHNlc3Npb24udXNlciBhcyBhbnkpLnJvbGUgPSB0b2tlbi5yb2xlIGFzIHN0cmluZ1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzZXNzaW9uXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgc2Vzc2lvbjoge1xyXG4gICAgc3RyYXRlZ3k6ICdqd3QnLFxyXG4gICAgbWF4QWdlOiAyNCAqIDYwICogNjAsIC8vIDI0IGhvdXJzXHJcbiAgfSxcclxuICBqd3Q6IHtcclxuICAgIG1heEFnZTogMjQgKiA2MCAqIDYwLFxyXG4gIH0sXHJcbiAgY29va2llczoge1xyXG4gICAgc2Vzc2lvblRva2VuOiB7XHJcbiAgICAgIG5hbWU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbidcclxuICAgICAgICA/ICdfX1NlY3VyZS1uZXh0LWF1dGguc2Vzc2lvbi10b2tlbidcclxuICAgICAgICA6ICduZXh0LWF1dGguc2Vzc2lvbi10b2tlbicsXHJcbiAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICBodHRwT25seTogdHJ1ZSxcclxuICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXHJcbiAgICAgICAgcGF0aDogJy8nLFxyXG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgfSxcclxuICBkZWJ1ZzogSVNfREVWLFxyXG4gIHRydXN0SG9zdDogdHJ1ZSxcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHsgaGFuZGxlcnMsIGF1dGggfSA9IE5leHRBdXRoKGF1dGhDb25maWcpXHJcbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9ucyA9IGF1dGhDb25maWdcclxuIl0sIm5hbWVzIjpbIk5leHRBdXRoIiwiQ3JlZGVudGlhbHNQcm92aWRlciIsIkdvb2dsZVByb3ZpZGVyIiwiY29tcGFyZSIsImhhc2giLCJnZXRVc2VyQnlFbWFpbCIsImNyZWF0ZVVzZXIiLCJJU19ERVYiLCJwcm9jZXNzIiwiYXV0aENvbmZpZyIsInByb3ZpZGVycyIsIm5hbWUiLCJjcmVkZW50aWFscyIsImVtYWlsIiwibGFiZWwiLCJ0eXBlIiwicGFzc3dvcmQiLCJhdXRob3JpemUiLCJjb25zb2xlIiwibG9nIiwiU3RyaW5nIiwidG9Mb3dlckNhc2UiLCJ0cmltIiwiaW5jbHVkZXMiLCJ1c2VyIiwiaXNBY3RpdmUiLCJpc1Bhc3N3b3JkVmFsaWQiLCJpZCIsInJvbGUiLCJlcnJvciIsImNvZGUiLCJFcnJvciIsImNsaWVudElkIiwiZW52IiwiR09PR0xFX0NMSUVOVF9JRCIsImNsaWVudFNlY3JldCIsIkdPT0dMRV9DTElFTlRfU0VDUkVUIiwicGFnZXMiLCJzaWduSW4iLCJjYWxsYmFja3MiLCJhY2NvdW50IiwicHJvdmlkZXIiLCJleGlzdGluZ1VzZXIiLCJyYW5kb21QYXNzd29yZCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInNsaWNlIiwiaGFzaGVkUGFzc3dvcmQiLCJuZXdVc2VyIiwiand0IiwidG9rZW4iLCJzZXNzaW9uIiwic3RyYXRlZ3kiLCJtYXhBZ2UiLCJjb29raWVzIiwic2Vzc2lvblRva2VuIiwib3B0aW9ucyIsImh0dHBPbmx5Iiwic2FtZVNpdGUiLCJwYXRoIiwic2VjdXJlIiwiZGVidWciLCJ0cnVzdEhvc3QiLCJoYW5kbGVycyIsImF1dGgiLCJhdXRoT3B0aW9ucyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addToCart: () => (/* binding */ addToCart),\n/* harmony export */   clearCart: () => (/* binding */ clearCart),\n/* harmony export */   createOrder: () => (/* binding */ createOrder),\n/* harmony export */   createProduct: () => (/* binding */ createProduct),\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   deleteOrder: () => (/* binding */ deleteOrder),\n/* harmony export */   deleteProduct: () => (/* binding */ deleteProduct),\n/* harmony export */   deleteUser: () => (/* binding */ deleteUser),\n/* harmony export */   getAllOrders: () => (/* binding */ getAllOrders),\n/* harmony export */   getAllProducts: () => (/* binding */ getAllProducts),\n/* harmony export */   getAllUsers: () => (/* binding */ getAllUsers),\n/* harmony export */   getCart: () => (/* binding */ getCart),\n/* harmony export */   getCategories: () => (/* binding */ getCategories),\n/* harmony export */   getOrderById: () => (/* binding */ getOrderById),\n/* harmony export */   getOrders: () => (/* binding */ getOrders),\n/* harmony export */   getProductById: () => (/* binding */ getProductById),\n/* harmony export */   getProductsByUserId: () => (/* binding */ getProductsByUserId),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   getUserById: () => (/* binding */ getUserById),\n/* harmony export */   initializeDatabase: () => (/* binding */ initializeDatabase),\n/* harmony export */   removeFromCart: () => (/* binding */ removeFromCart),\n/* harmony export */   updateCartQuantity: () => (/* binding */ updateCartQuantity),\n/* harmony export */   updateOrderDetails: () => (/* binding */ updateOrderDetails),\n/* harmony export */   updateOrderPayment: () => (/* binding */ updateOrderPayment),\n/* harmony export */   updateOrderStatus: () => (/* binding */ updateOrderStatus),\n/* harmony export */   updateProduct: () => (/* binding */ updateProduct),\n/* harmony export */   updateUser: () => (/* binding */ updateUser),\n/* harmony export */   updateUserPasswordByEmail: () => (/* binding */ updateUserPasswordByEmail)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./node_modules/mysql2/promise.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst poolConfig = {\n    waitForConnections: true,\n    connectionLimit: 10,\n    queueLimit: 0,\n    enableKeepAlive: true\n};\nif (process.env.DATABASE_URL) {\n    // TiDB Cloud or remote database - requires SSL\n    poolConfig.ssl = {\n        minVersion: 'TLSv1.2',\n        rejectUnauthorized: true\n    };\n    try {\n        const urlStr = process.env.DATABASE_URL;\n        // Try standard parsing first\n        try {\n            const url = new URL(urlStr);\n            poolConfig.host = url.hostname;\n            poolConfig.user = url.username;\n            poolConfig.password = url.password;\n            poolConfig.database = url.pathname.replace(/^\\//, '');\n            poolConfig.port = parseInt(url.port) || 4000;\n        } catch (parseError) {\n            // Fallback: Manual parsing for passwords with special chars\n            // Format: mysql://user:pass@host:port/db\n            const noProto = urlStr.replace(/^mysql:\\/\\//, '');\n            const lastAt = noProto.lastIndexOf('@');\n            if (lastAt === -1) throw parseError;\n            const creds = noProto.substring(0, lastAt);\n            const address = noProto.substring(lastAt + 1);\n            const firstColon = creds.indexOf(':');\n            poolConfig.user = firstColon === -1 ? creds : creds.substring(0, firstColon);\n            poolConfig.password = firstColon === -1 ? '' : creds.substring(firstColon + 1);\n            // Address part: host:port/db\n            const slashIdx = address.indexOf('/');\n            const hostPort = slashIdx === -1 ? address : address.substring(0, slashIdx);\n            poolConfig.database = slashIdx === -1 ? '' : address.substring(slashIdx + 1).split('?')[0];\n            const colonIdx = hostPort.lastIndexOf(':');\n            if (colonIdx !== -1) {\n                poolConfig.host = hostPort.substring(0, colonIdx);\n                poolConfig.port = parseInt(hostPort.substring(colonIdx + 1)) || 4000;\n            } else {\n                poolConfig.host = hostPort;\n                poolConfig.port = 4000;\n            }\n        }\n        if (!poolConfig.ssl) {\n            poolConfig.ssl = {\n                minVersion: 'TLSv1.2',\n                rejectUnauthorized: true\n            };\n        }\n    } catch (e) {\n        console.error('Invalid DATABASE_URL:', e);\n    }\n} else {\n    // Local MySQL - no SSL required\n    poolConfig.host = process.env.DB_HOST || 'localhost';\n    poolConfig.user = process.env.DB_USER || 'root';\n    poolConfig.password = process.env.DB_PASSWORD || '';\n    poolConfig.database = process.env.DB_NAME || 'graky_store';\n    poolConfig.port = parseInt(process.env.DB_PORT || '3306');\n    // Explicitly disable SSL for localhost\n    poolConfig.ssl = false;\n}\nconst pool = mysql2_promise__WEBPACK_IMPORTED_MODULE_0__.createPool(poolConfig);\nlet isInitialized = false;\nlet initPromise = null;\nlet initializationAttempted = false;\n// Initialize database tables\nasync function initializeDatabase() {\n    if (isInitialized) return;\n    // Prevent concurrent initialization calls\n    if (initPromise) return initPromise;\n    initPromise = (async ()=>{\n        const connection = await pool.getConnection();\n        try {\n            // Check if tables exist, if not create them\n            await connection.query(`\n        CREATE TABLE IF NOT EXISTS users (\n        id VARCHAR(36) PRIMARY KEY,\n        name VARCHAR(100) NOT NULL,\n        email VARCHAR(255) UNIQUE NOT NULL,\n        password VARCHAR(255) NOT NULL,\n        role ENUM('ADMIN', 'KARYAWAN', 'USER') DEFAULT 'USER',\n        isActive BOOLEAN DEFAULT true,\n        failedLoginAttempts INT DEFAULT 0,\n        lockoutUntil DATETIME NULL,\n        lastLoginAt DATETIME NULL,\n        createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,\n        updatedAt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n        INDEX idx_email (email),\n        INDEX idx_role (role)\n      )\n    `);\n            await connection.query(`\n      CREATE TABLE IF NOT EXISTS categories (\n        id VARCHAR(36) PRIMARY KEY,\n        name VARCHAR(100) UNIQUE NOT NULL,\n        icon VARCHAR(50) NOT NULL,\n        createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,\n        updatedAt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n      )\n    `);\n            await connection.query(`\n      CREATE TABLE IF NOT EXISTS products (\n        id VARCHAR(36) PRIMARY KEY,\n        name VARCHAR(255) NOT NULL,\n        categoryId VARCHAR(36) NOT NULL,\n        description LONGTEXT NOT NULL,\n        sizes VARCHAR(255) NOT NULL,\n        \\`condition\\` VARCHAR(10) NOT NULL,\n        price INT NOT NULL,\n        stock INT NOT NULL DEFAULT 0,\n        photoUrl VARCHAR(500),\n        userId VARCHAR(36) NOT NULL,\n        createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,\n        updatedAt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n        FOREIGN KEY (categoryId) REFERENCES categories(id) ON DELETE CASCADE,\n        FOREIGN KEY (userId) REFERENCES users(id) ON DELETE CASCADE,\n        INDEX idx_categoryId (categoryId),\n        INDEX idx_userId (userId),\n        INDEX idx_createdAt (createdAt)\n      )\n    `);\n            // Add stock column if it doesn't exist (for existing databases)\n            try {\n                await connection.query(`\n        ALTER TABLE products \n        ADD COLUMN IF NOT EXISTS stock INT NOT NULL DEFAULT 0\n      `);\n            } catch (error) {\n                // Column might already exist, ignore error\n                if (!error.message?.includes('Duplicate column name')) {\n                    console.warn('Could not add stock column:', error.message);\n                }\n            }\n            // Add lockout columns if they don't exist (for existing databases)\n            try {\n                await connection.query(`\n        ALTER TABLE users \n        ADD COLUMN IF NOT EXISTS failedLoginAttempts INT DEFAULT 0\n      `);\n                await connection.query(`\n        ALTER TABLE users \n        ADD COLUMN IF NOT EXISTS lockoutUntil DATETIME NULL\n      `);\n                await connection.query(`\n        ALTER TABLE users \n        ADD COLUMN IF NOT EXISTS lastLoginAt DATETIME NULL\n      `);\n            } catch (error) {\n                if (!error.message?.includes('Duplicate column name')) {\n                    console.warn('Could not add lockout columns:', error.message);\n                }\n            }\n            await connection.query(`\n      CREATE TABLE IF NOT EXISTS gallery_photos (\n        id VARCHAR(36) PRIMARY KEY,\n        url VARCHAR(500) NOT NULL,\n        productId VARCHAR(36) NOT NULL,\n        createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,\n        FOREIGN KEY (productId) REFERENCES products(id) ON DELETE CASCADE,\n        INDEX idx_productId (productId)\n      )\n    `);\n            await connection.query(`\n      CREATE TABLE IF NOT EXISTS audit_logs (\n        id VARCHAR(36) PRIMARY KEY,\n        action VARCHAR(50) NOT NULL,\n        entity VARCHAR(50) NOT NULL,\n        entityId VARCHAR(36) NOT NULL,\n        changes JSON,\n        userId VARCHAR(36) NOT NULL,\n        createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,\n        FOREIGN KEY (userId) REFERENCES users(id) ON DELETE CASCADE,\n        INDEX idx_userId (userId),\n        INDEX idx_createdAt (createdAt)\n      )\n    `);\n            await connection.query(`\n      CREATE TABLE IF NOT EXISTS carts (\n        id VARCHAR(36) PRIMARY KEY,\n        userId VARCHAR(36) NOT NULL,\n        productId VARCHAR(36) NOT NULL,\n        quantity INT NOT NULL DEFAULT 1,\n        createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,\n        updatedAt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n        FOREIGN KEY (userId) REFERENCES users(id) ON DELETE CASCADE,\n        FOREIGN KEY (productId) REFERENCES products(id) ON DELETE CASCADE,\n        INDEX idx_userId (userId),\n        INDEX idx_productId (productId)\n      )\n    `);\n            await connection.query(`\n      CREATE TABLE IF NOT EXISTS orders (\n        id VARCHAR(36) PRIMARY KEY,\n        userId VARCHAR(36) NOT NULL,\n        totalAmount INT NOT NULL,\n        shippingAddress VARCHAR(255) NOT NULL,\n        shippingCity VARCHAR(100) NOT NULL,\n        shippingPostal VARCHAR(20) NOT NULL,\n        shippingPhone VARCHAR(20) NOT NULL,\n        paymentStatus VARCHAR(20) DEFAULT 'PENDING',\n        orderStatus VARCHAR(20) DEFAULT 'PENDING',\n        paymentId VARCHAR(255) NULL,\n        paymentUrl TEXT NULL,\n        notes TEXT NULL,\n        processedAt DATETIME NULL,\n        processedBy VARCHAR(36) NULL,\n        rating INT NULL,\n        reviewText TEXT NULL,\n        reviewedAt DATETIME NULL,\n        createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,\n        updatedAt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n        FOREIGN KEY (userId) REFERENCES users(id) ON DELETE CASCADE,\n        INDEX idx_userId (userId),\n        INDEX idx_createdAt (createdAt)\n      )\n    `);\n            // Ensure payment columns exist (for existing databases)\n            try {\n                await connection.query(`ALTER TABLE orders ADD COLUMN IF NOT EXISTS paymentId VARCHAR(255) NULL`);\n                await connection.query(`ALTER TABLE orders ADD COLUMN IF NOT EXISTS paymentUrl TEXT NULL`);\n            } catch (e) {\n                console.warn('Could not ensure payment columns:', e);\n            }\n            await connection.query(`\n      CREATE TABLE IF NOT EXISTS order_items (\n        id VARCHAR(36) PRIMARY KEY,\n        orderId VARCHAR(36) NOT NULL,\n        productId VARCHAR(36) NOT NULL,\n        quantity INT NOT NULL,\n        price INT NOT NULL,\n        createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,\n        FOREIGN KEY (orderId) REFERENCES orders(id) ON DELETE CASCADE,\n        FOREIGN KEY (productId) REFERENCES products(id) ON DELETE CASCADE,\n        INDEX idx_orderId (orderId),\n        INDEX idx_productId (productId)\n      )\n    `);\n            // Ensure all order columns exist (best-effort)\n            try {\n                await connection.query(`ALTER TABLE orders ADD COLUMN IF NOT EXISTS notes TEXT NULL`);\n                await connection.query(`ALTER TABLE orders ADD COLUMN IF NOT EXISTS processedAt DATETIME NULL`);\n                await connection.query(`ALTER TABLE orders ADD COLUMN IF NOT EXISTS processedBy VARCHAR(36) NULL`);\n                await connection.query(`ALTER TABLE orders ADD COLUMN IF NOT EXISTS rating INT NULL`);\n                await connection.query(`ALTER TABLE orders ADD COLUMN IF NOT EXISTS reviewText TEXT NULL`);\n                await connection.query(`ALTER TABLE orders ADD COLUMN IF NOT EXISTS reviewedAt DATETIME NULL`);\n            } catch (e) {\n                try {\n                    const [rows] = await connection.query(`SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = ? AND TABLE_NAME = 'orders'`, [\n                        process.env.DB_NAME || 'graky_store'\n                    ]);\n                    const existing = (rows || []).map((r)=>r.COLUMN_NAME);\n                    if (!existing.includes('notes')) {\n                        await connection.query(`ALTER TABLE orders ADD COLUMN notes TEXT NULL`);\n                    }\n                    if (!existing.includes('processedAt')) {\n                        await connection.query(`ALTER TABLE orders ADD COLUMN processedAt DATETIME NULL`);\n                    }\n                    if (!existing.includes('processedBy')) {\n                        await connection.query(`ALTER TABLE orders ADD COLUMN processedBy VARCHAR(36) NULL`);\n                    }\n                    if (!existing.includes('rating')) {\n                        await connection.query(`ALTER TABLE orders ADD COLUMN rating INT NULL`);\n                    }\n                    if (!existing.includes('reviewText')) {\n                        await connection.query(`ALTER TABLE orders ADD COLUMN reviewText TEXT NULL`);\n                    }\n                    if (!existing.includes('reviewedAt')) {\n                        await connection.query(`ALTER TABLE orders ADD COLUMN reviewedAt DATETIME NULL`);\n                    }\n                } catch (e2) {\n                    console.warn('Could not ensure order columns (non-fatal):', e2);\n                }\n            }\n            // Insert default categories if not exist\n            const [categories] = await connection.query('SELECT COUNT(*) as count FROM categories');\n            if (categories[0].count === 0) {\n                await connection.query(`\n        INSERT INTO categories (id, name, icon) VALUES\n        ('cat-topi', 'Topi', 'ðŸŽ©'),\n        ('cat-kaos', 'Kaos', 'ðŸ‘•'),\n        ('cat-kemeja', 'Kemeja', 'ðŸ‘”'),\n        ('cat-jacket', 'Jacket', 'ðŸ§¥'),\n        ('cat-hoodie', 'Hoodie', 'ðŸŽ½'),\n        ('cat-jeans', 'Celana Jeans', 'ðŸ‘–'),\n        ('cat-shorts', 'Celana Pendek', 'ðŸ©³'),\n        ('cat-shoes', 'Sepatu', 'ðŸ‘Ÿ')\n      `);\n            }\n            if (true) {\n                console.log('âœ“ Database initialized successfully');\n            }\n            isInitialized = true;\n        } catch (error) {\n            console.error('âœ— Database initialization error:', error);\n            throw error;\n        } finally{\n            connection.release();\n        }\n    })();\n    return initPromise;\n}\n// User functions\nasync function createUser(name, email, password, role = 'USER') {\n    // Ensure database is initialized before any operation (critical for Vercel serverless)\n    if (!initializationAttempted) {\n        initializationAttempted = true;\n        try {\n            await initializeDatabase();\n        } catch (error) {\n            console.error('[DB Init] Failed to initialize database:', error);\n            throw new Error('Database initialization failed');\n        }\n    }\n    const connection = await pool.getConnection();\n    try {\n        // Hash password jika belum ter-hash (use 12 rounds for better security)\n        const hashedPassword = password.startsWith('$2') ? password : await bcryptjs__WEBPACK_IMPORTED_MODULE_2___default().hash(password, 12);\n        const id = (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)();\n        await connection.query('INSERT INTO users (id, name, email, password, role) VALUES (?, ?, ?, ?, ?)', [\n            id,\n            name,\n            email,\n            hashedPassword,\n            role\n        ]);\n        return {\n            id,\n            name,\n            email,\n            role\n        };\n    } catch (error) {\n        if (error.code === 'ER_DUP_ENTRY') {\n            throw new Error('Email sudah terdaftar');\n        }\n        throw error;\n    } finally{\n        connection.release();\n    }\n}\nasync function getUserByEmail(email) {\n    const connection = await pool.getConnection();\n    try {\n        const [rows] = await connection.query('SELECT * FROM users WHERE email = ?', [\n            email\n        ]);\n        return rows.length > 0 ? rows[0] : null;\n    } finally{\n        connection.release();\n    }\n}\nasync function getUserById(id) {\n    const connection = await pool.getConnection();\n    try {\n        const [rows] = await connection.query('SELECT id, name, email, role, isActive FROM users WHERE id = ?', [\n            id\n        ]);\n        return rows.length > 0 ? rows[0] : null;\n    } finally{\n        connection.release();\n    }\n}\nasync function getAllUsers() {\n    const connection = await pool.getConnection();\n    try {\n        const [rows] = await connection.query('SELECT id, name, email, role, isActive, createdAt FROM users ORDER BY createdAt DESC');\n        return rows;\n    } finally{\n        connection.release();\n    }\n}\nasync function updateUser(id, data) {\n    const connection = await pool.getConnection();\n    try {\n        const fields = Object.keys(data).map((key)=>`${key} = ?`).join(', ');\n        const values = Object.values(data);\n        await connection.query(`UPDATE users SET ${fields}, updatedAt = NOW() WHERE id = ?`, [\n            ...values,\n            id\n        ]);\n        return {\n            id,\n            ...data\n        };\n    } finally{\n        connection.release();\n    }\n}\nasync function deleteUser(id) {\n    const connection = await pool.getConnection();\n    try {\n        await connection.query('DELETE FROM users WHERE id = ?', [\n            id\n        ]);\n        return {\n            success: true\n        };\n    } finally{\n        connection.release();\n    }\n}\n// Product functions\nasync function createProduct(productData) {\n    const connection = await pool.getConnection();\n    try {\n        const id = (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)();\n        // Simpan produk\n        await connection.query('INSERT INTO products (id, name, categoryId, description, sizes, `condition`, price, stock, photoUrl, userId) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', [\n            id,\n            productData.name,\n            productData.categoryId,\n            productData.description,\n            JSON.stringify(productData.sizes),\n            productData.condition,\n            productData.price,\n            productData.stock || 0,\n            productData.photoUrls?.[0] || null,\n            productData.userId\n        ]);\n        // Simpan foto tambahan ke gallery_photos\n        if (productData.photoUrls && productData.photoUrls.length > 1) {\n            for(let i = 1; i < productData.photoUrls.length; i++){\n                await connection.query('INSERT INTO gallery_photos (id, url, productId) VALUES (?, ?, ?)', [\n                    (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n                    productData.photoUrls[i],\n                    id\n                ]);\n            }\n        }\n        return {\n            id,\n            ...productData\n        };\n    } finally{\n        connection.release();\n    }\n}\n// GET all products (public)\nasync function getAllProducts() {\n    const connection = await pool.getConnection();\n    try {\n        const [rows] = await connection.query(`SELECT \n        id, name, categoryId, description, sizes, \n        \\`condition\\`, price, stock, photoUrl, userId, createdAt\n       FROM products \n       ORDER BY createdAt DESC`);\n        const products = rows.map((row)=>({\n                id: row.id,\n                name: row.name,\n                categoryId: row.categoryId,\n                description: row.description,\n                condition: row.condition,\n                price: row.price,\n                stock: row.stock ?? 0,\n                sizes: typeof row.sizes === 'string' ? JSON.parse(row.sizes) : row.sizes || [],\n                photoUrl: row.photoUrl,\n                userId: row.userId,\n                createdAt: row.createdAt,\n                rating: 4.5,\n                sold: 0\n            }));\n        // Fetch gallery photos for all products in one query\n        const productIds = products.map((p)=>p.id);\n        if (productIds.length === 0) return [];\n        // Validate all productIds are UUIDs to prevent SQL injection\n        const validProductIds = productIds.filter((id)=>typeof id === 'string' && /^[a-f0-9-]{36}$/i.test(id));\n        let photosByProduct = {};\n        if (validProductIds.length > 0) {\n            const placeholders = validProductIds.map(()=>'?').join(',');\n            const [photosRows] = await connection.query(`SELECT productId, url FROM gallery_photos WHERE productId IN (${placeholders})`, validProductIds);\n            for (const pr of photosRows){\n                photosByProduct[pr.productId] = photosByProduct[pr.productId] || [];\n                photosByProduct[pr.productId].push(pr.url);\n            }\n        }\n        // Build full photoUrls array: primary photoUrl first if exists, then gallery photos\n        return products.map((p)=>{\n            const gallery = photosByProduct[p.id] || [];\n            const photoUrls = [];\n            if (p.photoUrl) photoUrls.push(p.photoUrl);\n            photoUrls.push(...gallery);\n            return {\n                id: p.id,\n                name: p.name,\n                categoryId: p.categoryId,\n                description: p.description,\n                condition: p.condition,\n                price: p.price,\n                stock: p.stock ?? 0,\n                sizes: p.sizes,\n                photoUrls,\n                userId: p.userId,\n                createdAt: p.createdAt,\n                rating: p.rating,\n                sold: p.sold\n            };\n        });\n    } catch (error) {\n        console.error('Error getting all products:', error);\n        return [];\n    } finally{\n        connection.release();\n    }\n}\n// GET products by user ID\nasync function getProductsByUserId(userId) {\n    const connection = await pool.getConnection();\n    try {\n        const [rows] = await connection.query(`SELECT \n        id, name, categoryId, description, sizes, \n        \\`condition\\`, price, stock, photoUrl, userId, createdAt\n       FROM products \n       WHERE userId = ?\n       ORDER BY createdAt DESC`, [\n            userId\n        ]);\n        const products = rows.map((row)=>({\n                ...row,\n                sizes: typeof row.sizes === 'string' ? JSON.parse(row.sizes) : row.sizes,\n                stock: row.stock ?? 0,\n                photoUrl: row.photoUrl\n            }));\n        const productIds = products.map((p)=>p.id);\n        if (productIds.length === 0) {\n            return products.map((p)=>({\n                    ...p,\n                    photoUrls: p.photoUrl ? [\n                        p.photoUrl\n                    ] : []\n                }));\n        }\n        // Validate all productIds are UUIDs to prevent SQL injection\n        const validProductIds = productIds.filter((id)=>typeof id === 'string' && /^[a-f0-9-]{36}$/i.test(id));\n        let photosByProduct = {};\n        if (validProductIds.length > 0) {\n            const placeholders = validProductIds.map(()=>'?').join(',');\n            const [photosRows] = await connection.query(`SELECT productId, url FROM gallery_photos WHERE productId IN (${placeholders})`, validProductIds);\n            for (const pr of photosRows){\n                photosByProduct[pr.productId] = photosByProduct[pr.productId] || [];\n                photosByProduct[pr.productId].push(pr.url);\n            }\n        }\n        return products.map((p)=>{\n            const gallery = photosByProduct[p.id] || [];\n            const photoUrls = [];\n            if (p.photoUrl) photoUrls.push(p.photoUrl);\n            photoUrls.push(...gallery);\n            return {\n                ...p,\n                photoUrls\n            };\n        });\n    } catch (error) {\n        console.error('Error getting products by user:', error);\n        return [];\n    } finally{\n        connection.release();\n    }\n}\nasync function getProductById(id) {\n    const connection = await pool.getConnection();\n    try {\n        const [rows] = await connection.query('SELECT * FROM products WHERE id = ?', [\n            id\n        ]);\n        if (rows.length === 0) return null;\n        const row = rows[0];\n        const sizes = typeof row.sizes === 'string' ? JSON.parse(row.sizes) : row.sizes || [];\n        // Fetch gallery photos for this product\n        const [photoRows] = await connection.query('SELECT url FROM gallery_photos WHERE productId = ? ORDER BY createdAt ASC', [\n            id\n        ]);\n        const galleryUrls = (photoRows || []).map((r)=>r.url);\n        const photoUrls = [];\n        if (row.photoUrl) photoUrls.push(row.photoUrl);\n        photoUrls.push(...galleryUrls);\n        return {\n            ...row,\n            sizes,\n            photoUrls,\n            stock: row.stock ?? 0,\n            rating: 4.5,\n            sold: 0\n        };\n    } catch (error) {\n        console.error('Error getting product by ID:', error);\n        return null;\n    } finally{\n        connection.release();\n    }\n}\nasync function updateProduct(id, data) {\n    const connection = await pool.getConnection();\n    try {\n        // Prepare update fields\n        const updateFields = [];\n        const values = [];\n        // Handle each field\n        if (data.name !== undefined) {\n            updateFields.push('name = ?');\n            values.push(data.name);\n        }\n        if (data.categoryId !== undefined) {\n            updateFields.push('categoryId = ?');\n            values.push(data.categoryId);\n        }\n        if (data.description !== undefined) {\n            updateFields.push('description = ?');\n            values.push(data.description);\n        }\n        if (data.condition !== undefined) {\n            updateFields.push('`condition` = ?');\n            values.push(data.condition);\n        }\n        if (data.price !== undefined) {\n            updateFields.push('price = ?');\n            values.push(data.price);\n        }\n        if (data.stock !== undefined) {\n            updateFields.push('stock = ?');\n            values.push(data.stock);\n        }\n        if (data.sizes !== undefined) {\n            updateFields.push('sizes = ?');\n            values.push(JSON.stringify(data.sizes));\n        }\n        // If photoUrls provided, set primary photo (first) in products.photoUrl\n        if (data.photoUrls !== undefined) {\n            const primary = data.photoUrls.length > 0 ? data.photoUrls[0] : null;\n            updateFields.push('photoUrl = ?');\n            values.push(primary);\n        }\n        // Always update timestamp\n        updateFields.push('updatedAt = NOW()');\n        // Add product id as last parameter\n        values.push(id);\n        if (updateFields.length > 1) {\n            const query = `UPDATE products SET ${updateFields.join(', ')} WHERE id = ?`;\n            await connection.query(query, values);\n        }\n        // If photoUrls provided, synchronize gallery_photos:\n        if (data.photoUrls !== undefined) {\n            // Remove existing gallery photos for this product\n            await connection.query('DELETE FROM gallery_photos WHERE productId = ?', [\n                id\n            ]);\n            // Insert remaining photos (from index 1..)\n            if (data.photoUrls.length > 1) {\n                const inserts = [];\n                for(let i = 1; i < data.photoUrls.length; i++){\n                    inserts.push([\n                        (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n                        data.photoUrls[i],\n                        id\n                    ]);\n                }\n                // Bulk insert\n                const placeholders = inserts.map(()=>'(?, ?, ?)').join(', ');\n                const flatValues = inserts.flat();\n                await connection.query(`INSERT INTO gallery_photos (id, url, productId) VALUES ${placeholders}`, flatValues);\n            }\n        }\n        return {\n            id,\n            ...data\n        };\n    } catch (error) {\n        console.error('Update product error:', error);\n        throw error;\n    } finally{\n        connection.release();\n    }\n}\nasync function deleteProduct(id) {\n    const connection = await pool.getConnection();\n    try {\n        await connection.query('DELETE FROM products WHERE id = ?', [\n            id\n        ]);\n        return {\n            success: true\n        };\n    } finally{\n        connection.release();\n    }\n}\nasync function getCategories() {\n    const connection = await pool.getConnection();\n    try {\n        const [rows] = await connection.query('SELECT * FROM categories');\n        return Array.isArray(rows) ? rows : [];\n    } catch (error) {\n        console.error('[DB] getCategories error:', error);\n        // Return empty array on error for graceful fallback\n        return [];\n    } finally{\n        connection.release();\n    }\n}\nasync function updateUserPasswordByEmail(email, hashedPassword) {\n    const connection = await pool.getConnection();\n    try {\n        await connection.query('UPDATE users SET password = ?, updatedAt = NOW() WHERE email = ?', [\n            hashedPassword,\n            email\n        ]);\n        return {\n            success: true\n        };\n    } finally{\n        connection.release();\n    }\n}\n// Cart functions\nasync function addToCart(userId, productId, quantity = 1) {\n    const connection = await pool.getConnection();\n    try {\n        const id = (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)();\n        await connection.query('INSERT INTO carts (id, userId, productId, quantity) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE quantity = quantity + ?', [\n            id,\n            userId,\n            productId,\n            quantity,\n            quantity\n        ]);\n        return {\n            success: true\n        };\n    } finally{\n        connection.release();\n    }\n}\nasync function getCart(userId) {\n    const connection = await pool.getConnection();\n    try {\n        const [cartItems] = await connection.query(`SELECT \n        c.id, c.quantity, \n        p.id as productId, p.name, p.price, p.photoUrl, \n        p.categoryId, p.condition\n      FROM carts c\n      JOIN products p ON c.productId = p.id\n      WHERE c.userId = ?\n      ORDER BY c.createdAt DESC`, [\n            userId\n        ]);\n        return cartItems.map((item)=>({\n                cartId: item.id,\n                quantity: item.quantity,\n                product: {\n                    id: item.productId,\n                    name: item.name,\n                    price: item.price,\n                    photoUrl: item.photoUrl,\n                    categoryId: item.categoryId,\n                    condition: item.condition\n                }\n            }));\n    } finally{\n        connection.release();\n    }\n}\nasync function updateCartQuantity(cartId, quantity) {\n    const connection = await pool.getConnection();\n    try {\n        if (quantity <= 0) {\n            await connection.query('DELETE FROM carts WHERE id = ?', [\n                cartId\n            ]);\n        } else {\n            await connection.query('UPDATE carts SET quantity = ? WHERE id = ?', [\n                quantity,\n                cartId\n            ]);\n        }\n        return {\n            success: true\n        };\n    } finally{\n        connection.release();\n    }\n}\nasync function removeFromCart(cartId) {\n    const connection = await pool.getConnection();\n    try {\n        await connection.query('DELETE FROM carts WHERE id = ?', [\n            cartId\n        ]);\n        return {\n            success: true\n        };\n    } finally{\n        connection.release();\n    }\n}\nasync function clearCart(userId) {\n    const connection = await pool.getConnection();\n    try {\n        await connection.query('DELETE FROM carts WHERE userId = ?', [\n            userId\n        ]);\n        return {\n            success: true\n        };\n    } finally{\n        connection.release();\n    }\n}\n// Order functions\nasync function createOrder(userId, cartItems, shippingData) {\n    const connection = await pool.getConnection();\n    try {\n        const orderId = (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)();\n        const totalAmount = cartItems.reduce((sum, item)=>sum + item.product.price * item.quantity, 0);\n        await connection.query(`INSERT INTO orders \n        (id, userId, totalAmount, shippingAddress, shippingCity, shippingPostal, \n         shippingPhone, paymentStatus, orderStatus) \n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`, [\n            orderId,\n            userId,\n            totalAmount,\n            shippingData.address,\n            shippingData.city,\n            shippingData.postal,\n            shippingData.phone,\n            'PENDING',\n            'PENDING'\n        ]);\n        // Insert order items\n        for (const item of cartItems){\n            await connection.query(`INSERT INTO order_items (id, orderId, productId, quantity, price)\n         VALUES (?, ?, ?, ?, ?)`, [\n                (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n                orderId,\n                item.product.id,\n                item.quantity,\n                item.product.price\n            ]);\n        }\n        // Clear cart\n        await clearCart(userId);\n        return {\n            orderId,\n            totalAmount\n        };\n    } finally{\n        connection.release();\n    }\n}\nasync function getOrders(userId) {\n    const connection = await pool.getConnection();\n    try {\n        const [orders] = await connection.query(`SELECT * FROM orders WHERE userId = ? ORDER BY createdAt DESC`, [\n            userId\n        ]);\n        const ordersWithItems = await Promise.all(orders.map(async (order)=>{\n            const [items] = await connection.query(`SELECT oi.*, p.name, p.photoUrl \n           FROM order_items oi\n           JOIN products p ON oi.productId = p.id\n           WHERE oi.orderId = ?`, [\n                order.id\n            ]);\n            return {\n                ...order,\n                items\n            };\n        }));\n        return ordersWithItems;\n    } finally{\n        connection.release();\n    }\n}\nasync function getOrderById(orderId) {\n    const connection = await pool.getConnection();\n    try {\n        const [orders] = await connection.query(`SELECT o.*, u.id as userId, u.name as userName, u.email as userEmail\n       FROM orders o\n       LEFT JOIN users u ON o.userId = u.id\n       WHERE o.id = ?`, [\n            orderId\n        ]);\n        if (orders.length === 0) return null;\n        const order = orders[0];\n        const [items] = await connection.query(`SELECT oi.*, p.id as productId, p.name, p.price, p.photoUrl \n       FROM order_items oi\n       JOIN products p ON oi.productId = p.id\n       WHERE oi.orderId = ?`, [\n            orderId\n        ]);\n        return {\n            ...order,\n            user: {\n                id: order.userId,\n                name: order.userName,\n                email: order.userEmail\n            },\n            items: items.map((item)=>({\n                    id: item.id,\n                    quantity: item.quantity,\n                    price: item.price,\n                    product: {\n                        id: item.productId,\n                        name: item.name\n                    }\n                }))\n        };\n    } finally{\n        connection.release();\n    }\n}\nasync function updateOrderPayment(orderId, paymentId, paymentUrl) {\n    const connection = await pool.getConnection();\n    try {\n        await connection.query('UPDATE orders SET paymentId = ?, paymentUrl = ?, updatedAt = NOW() WHERE id = ?', [\n            paymentId,\n            paymentUrl,\n            orderId\n        ]);\n        return {\n            success: true\n        };\n    } finally{\n        connection.release();\n    }\n}\nasync function updateOrderStatus(orderId, status, paymentStatus) {\n    const connection = await pool.getConnection();\n    try {\n        const updates = [\n            'orderStatus = ?'\n        ];\n        const values = [\n            status\n        ];\n        if (paymentStatus) {\n            updates.push('paymentStatus = ?');\n            values.push(paymentStatus);\n        }\n        values.push(orderId);\n        await connection.query(`UPDATE orders SET ${updates.join(', ')}, updatedAt = NOW() WHERE id = ?`, values);\n        return {\n            success: true\n        };\n    } finally{\n        connection.release();\n    }\n}\nasync function getAllOrders(page = 1, limit = 10, status = 'ALL') {\n    const connection = await pool.getConnection();\n    try {\n        const offset = (page - 1) * limit;\n        let whereClause = '';\n        const params = [];\n        if (status !== 'ALL') {\n            whereClause = 'WHERE o.orderStatus = ?';\n            params.push(status);\n        }\n        // Get total count\n        const [countResult] = await connection.query(`SELECT COUNT(*) as total FROM orders o ${whereClause}`, params);\n        const totalOrders = countResult[0]?.total || 0;\n        const totalPages = Math.ceil(totalOrders / limit);\n        // Get paginated orders with user info\n        const [orders] = await connection.query(`SELECT o.*, u.name as user_name, u.email as user_email\n       FROM orders o\n       LEFT JOIN users u ON o.userId = u.id\n       ${whereClause}\n       ORDER BY o.createdAt DESC\n       LIMIT ? OFFSET ?`, [\n            ...params,\n            limit,\n            offset\n        ]);\n        // Format response\n        const formattedOrders = orders.map((order)=>({\n                id: order.id,\n                totalAmount: order.totalAmount,\n                orderStatus: order.orderStatus,\n                paymentStatus: order.paymentStatus,\n                shippingCity: order.shippingCity,\n                user: {\n                    name: order.user_name,\n                    email: order.user_email\n                },\n                createdAt: order.createdAt,\n                items: [] // Will be populated if needed\n            }));\n        return {\n            orders: formattedOrders,\n            totalPages,\n            currentPage: page,\n            totalOrders\n        };\n    } finally{\n        connection.release();\n    }\n}\nasync function updateOrderDetails(id, data) {\n    const connection = await pool.getConnection();\n    try {\n        const updateFields = [];\n        const values = [];\n        if (data.orderStatus) {\n            updateFields.push('orderStatus = ?');\n            values.push(data.orderStatus);\n        }\n        if (data.paymentStatus) {\n            updateFields.push('paymentStatus = ?');\n            values.push(data.paymentStatus);\n        }\n        if (data.notes !== undefined) {\n            updateFields.push('notes = ?');\n            values.push(data.notes);\n        }\n        if (data.processedBy) {\n            updateFields.push('processedBy = ?');\n            values.push(data.processedBy);\n            updateFields.push('processedAt = NOW()');\n        }\n        // Always update timestamp\n        updateFields.push('updatedAt = NOW()');\n        values.push(id);\n        if (updateFields.length > 1) {\n            const query = `UPDATE orders SET ${updateFields.join(', ')} WHERE id = ?`;\n            await connection.query(query, values);\n        }\n        return {\n            success: true\n        };\n    } finally{\n        connection.release();\n    }\n}\nasync function deleteOrder(id) {\n    const connection = await pool.getConnection();\n    try {\n        // Delete order items first (foreign key constraint)\n        await connection.query('DELETE FROM order_items WHERE orderId = ?', [\n            id\n        ]);\n        // Delete order\n        const [result] = await connection.query('DELETE FROM orders WHERE id = ?', [\n            id\n        ]);\n        return {\n            success: result.affectedRows > 0\n        };\n    } finally{\n        connection.release();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LG9EQUFvRDtRQUNwRCxNQUFNRCxXQUFXRSxLQUFLLENBQUMsNkNBQTZDO1lBQUNzQjtTQUFHO1FBRXhFLGVBQWU7UUFDZixNQUFNLENBQUMySCxPQUFPLEdBQVEsTUFBTW5KLFdBQVdFLEtBQUssQ0FBQyxtQ0FBbUM7WUFBQ3NCO1NBQUc7UUFFcEYsT0FBTztZQUFFZSxTQUFTNEcsT0FBT0MsWUFBWSxHQUFHO1FBQUU7SUFDNUMsU0FBVTtRQUNScEosV0FBV2UsT0FBTztJQUNwQjtBQUNGIiwic291cmNlcyI6WyJDOlxceGFtcHBcXGh0ZG9jc1xcZ3Jha3kgc3RvcmUgd2ViXFxsaWJcXGRiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBteXNxbCBmcm9tICdteXNxbDIvcHJvbWlzZSdcbmltcG9ydCB7IHJhbmRvbVVVSUQgfSBmcm9tICdjcnlwdG8nXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdGpzJ1xuXG5jb25zdCBwb29sQ29uZmlnOiBhbnkgPSB7XG4gIHdhaXRGb3JDb25uZWN0aW9uczogdHJ1ZSxcbiAgY29ubmVjdGlvbkxpbWl0OiAxMCwgLy8gSW5jcmVhc2VkIGZvciBidWlsZCBwcm9jZXNzXG4gIHF1ZXVlTGltaXQ6IDAsIC8vIFVubGltaXRlZCBxdWV1ZVxuICBlbmFibGVLZWVwQWxpdmU6IHRydWUsXG59XG5cbmlmIChwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwpIHtcbiAgLy8gVGlEQiBDbG91ZCBvciByZW1vdGUgZGF0YWJhc2UgLSByZXF1aXJlcyBTU0xcbiAgcG9vbENvbmZpZy5zc2wgPSB7XG4gICAgbWluVmVyc2lvbjogJ1RMU3YxLjInLFxuICAgIHJlamVjdFVuYXV0aG9yaXplZDogdHJ1ZSxcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgdXJsU3RyID0gcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMO1xuICAgIC8vIFRyeSBzdGFuZGFyZCBwYXJzaW5nIGZpcnN0XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwodXJsU3RyKTtcbiAgICAgIHBvb2xDb25maWcuaG9zdCA9IHVybC5ob3N0bmFtZTtcbiAgICAgIHBvb2xDb25maWcudXNlciA9IHVybC51c2VybmFtZTtcbiAgICAgIHBvb2xDb25maWcucGFzc3dvcmQgPSB1cmwucGFzc3dvcmQ7XG4gICAgICBwb29sQ29uZmlnLmRhdGFiYXNlID0gdXJsLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCAnJyk7XG4gICAgICBwb29sQ29uZmlnLnBvcnQgPSBwYXJzZUludCh1cmwucG9ydCkgfHwgNDAwMDtcbiAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgICAvLyBGYWxsYmFjazogTWFudWFsIHBhcnNpbmcgZm9yIHBhc3N3b3JkcyB3aXRoIHNwZWNpYWwgY2hhcnNcbiAgICAgIC8vIEZvcm1hdDogbXlzcWw6Ly91c2VyOnBhc3NAaG9zdDpwb3J0L2RiXG4gICAgICBjb25zdCBub1Byb3RvID0gdXJsU3RyLnJlcGxhY2UoL15teXNxbDpcXC9cXC8vLCAnJyk7XG4gICAgICBjb25zdCBsYXN0QXQgPSBub1Byb3RvLmxhc3RJbmRleE9mKCdAJyk7XG4gICAgICBpZiAobGFzdEF0ID09PSAtMSkgdGhyb3cgcGFyc2VFcnJvcjtcblxuICAgICAgY29uc3QgY3JlZHMgPSBub1Byb3RvLnN1YnN0cmluZygwLCBsYXN0QXQpO1xuICAgICAgY29uc3QgYWRkcmVzcyA9IG5vUHJvdG8uc3Vic3RyaW5nKGxhc3RBdCArIDEpO1xuXG4gICAgICBjb25zdCBmaXJzdENvbG9uID0gY3JlZHMuaW5kZXhPZignOicpO1xuICAgICAgcG9vbENvbmZpZy51c2VyID0gZmlyc3RDb2xvbiA9PT0gLTEgPyBjcmVkcyA6IGNyZWRzLnN1YnN0cmluZygwLCBmaXJzdENvbG9uKTtcbiAgICAgIHBvb2xDb25maWcucGFzc3dvcmQgPSBmaXJzdENvbG9uID09PSAtMSA/ICcnIDogY3JlZHMuc3Vic3RyaW5nKGZpcnN0Q29sb24gKyAxKTtcblxuICAgICAgLy8gQWRkcmVzcyBwYXJ0OiBob3N0OnBvcnQvZGJcbiAgICAgIGNvbnN0IHNsYXNoSWR4ID0gYWRkcmVzcy5pbmRleE9mKCcvJyk7XG4gICAgICBjb25zdCBob3N0UG9ydCA9IHNsYXNoSWR4ID09PSAtMSA/IGFkZHJlc3MgOiBhZGRyZXNzLnN1YnN0cmluZygwLCBzbGFzaElkeCk7XG4gICAgICBwb29sQ29uZmlnLmRhdGFiYXNlID0gc2xhc2hJZHggPT09IC0xID8gJycgOiBhZGRyZXNzLnN1YnN0cmluZyhzbGFzaElkeCArIDEpLnNwbGl0KCc/JylbMF07XG5cbiAgICAgIGNvbnN0IGNvbG9uSWR4ID0gaG9zdFBvcnQubGFzdEluZGV4T2YoJzonKTtcbiAgICAgIGlmIChjb2xvbklkeCAhPT0gLTEpIHtcbiAgICAgICAgcG9vbENvbmZpZy5ob3N0ID0gaG9zdFBvcnQuc3Vic3RyaW5nKDAsIGNvbG9uSWR4KTtcbiAgICAgICAgcG9vbENvbmZpZy5wb3J0ID0gcGFyc2VJbnQoaG9zdFBvcnQuc3Vic3RyaW5nKGNvbG9uSWR4ICsgMSkpIHx8IDQwMDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwb29sQ29uZmlnLmhvc3QgPSBob3N0UG9ydDtcbiAgICAgICAgcG9vbENvbmZpZy5wb3J0ID0gNDAwMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXBvb2xDb25maWcuc3NsKSB7XG4gICAgICBwb29sQ29uZmlnLnNzbCA9IHsgbWluVmVyc2lvbjogJ1RMU3YxLjInLCByZWplY3RVbmF1dGhvcml6ZWQ6IHRydWUgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgREFUQUJBU0VfVVJMOicsIGUpXG4gIH1cbn0gZWxzZSB7XG4gIC8vIExvY2FsIE15U1FMIC0gbm8gU1NMIHJlcXVpcmVkXG4gIHBvb2xDb25maWcuaG9zdCA9IHByb2Nlc3MuZW52LkRCX0hPU1QgfHwgJ2xvY2FsaG9zdCdcbiAgcG9vbENvbmZpZy51c2VyID0gcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCAncm9vdCdcbiAgcG9vbENvbmZpZy5wYXNzd29yZCA9IHByb2Nlc3MuZW52LkRCX1BBU1NXT1JEIHx8ICcnXG4gIHBvb2xDb25maWcuZGF0YWJhc2UgPSBwcm9jZXNzLmVudi5EQl9OQU1FIHx8ICdncmFreV9zdG9yZSdcbiAgcG9vbENvbmZpZy5wb3J0ID0gcGFyc2VJbnQocHJvY2Vzcy5lbnYuREJfUE9SVCB8fCAnMzMwNicpXG4gIC8vIEV4cGxpY2l0bHkgZGlzYWJsZSBTU0wgZm9yIGxvY2FsaG9zdFxuICBwb29sQ29uZmlnLnNzbCA9IGZhbHNlXG59XG5cbmNvbnN0IHBvb2wgPSBteXNxbC5jcmVhdGVQb29sKHBvb2xDb25maWcpXG5cbmxldCBpc0luaXRpYWxpemVkID0gZmFsc2VcbmxldCBpbml0UHJvbWlzZTogUHJvbWlzZTx2b2lkPiB8IG51bGwgPSBudWxsXG5sZXQgaW5pdGlhbGl6YXRpb25BdHRlbXB0ZWQgPSBmYWxzZVxuXG4vLyBJbml0aWFsaXplIGRhdGFiYXNlIHRhYmxlc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVEYXRhYmFzZSgpIHtcbiAgaWYgKGlzSW5pdGlhbGl6ZWQpIHJldHVyblxuXG4gIC8vIFByZXZlbnQgY29uY3VycmVudCBpbml0aWFsaXphdGlvbiBjYWxsc1xuICBpZiAoaW5pdFByb21pc2UpIHJldHVybiBpbml0UHJvbWlzZVxuXG4gIGluaXRQcm9taXNlID0gKGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKClcbiAgICB0cnkge1xuICAgICAgLy8gQ2hlY2sgaWYgdGFibGVzIGV4aXN0LCBpZiBub3QgY3JlYXRlIHRoZW1cbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoYFxuICAgICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyB1c2VycyAoXG4gICAgICAgIGlkIFZBUkNIQVIoMzYpIFBSSU1BUlkgS0VZLFxuICAgICAgICBuYW1lIFZBUkNIQVIoMTAwKSBOT1QgTlVMTCxcbiAgICAgICAgZW1haWwgVkFSQ0hBUigyNTUpIFVOSVFVRSBOT1QgTlVMTCxcbiAgICAgICAgcGFzc3dvcmQgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgICAgICByb2xlIEVOVU0oJ0FETUlOJywgJ0tBUllBV0FOJywgJ1VTRVInKSBERUZBVUxUICdVU0VSJyxcbiAgICAgICAgaXNBY3RpdmUgQk9PTEVBTiBERUZBVUxUIHRydWUsXG4gICAgICAgIGZhaWxlZExvZ2luQXR0ZW1wdHMgSU5UIERFRkFVTFQgMCxcbiAgICAgICAgbG9ja291dFVudGlsIERBVEVUSU1FIE5VTEwsXG4gICAgICAgIGxhc3RMb2dpbkF0IERBVEVUSU1FIE5VTEwsXG4gICAgICAgIGNyZWF0ZWRBdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgICB1cGRhdGVkQXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCBPTiBVUERBVEUgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIElOREVYIGlkeF9lbWFpbCAoZW1haWwpLFxuICAgICAgICBJTkRFWCBpZHhfcm9sZSAocm9sZSlcbiAgICAgIClcbiAgICBgKVxuXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KGBcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGNhdGVnb3JpZXMgKFxuICAgICAgICBpZCBWQVJDSEFSKDM2KSBQUklNQVJZIEtFWSxcbiAgICAgICAgbmFtZSBWQVJDSEFSKDEwMCkgVU5JUVVFIE5PVCBOVUxMLFxuICAgICAgICBpY29uIFZBUkNIQVIoNTApIE5PVCBOVUxMLFxuICAgICAgICBjcmVhdGVkQXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgdXBkYXRlZEF0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAgT04gVVBEQVRFIENVUlJFTlRfVElNRVNUQU1QXG4gICAgICApXG4gICAgYClcblxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShgXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBwcm9kdWN0cyAoXG4gICAgICAgIGlkIFZBUkNIQVIoMzYpIFBSSU1BUlkgS0VZLFxuICAgICAgICBuYW1lIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAgICAgY2F0ZWdvcnlJZCBWQVJDSEFSKDM2KSBOT1QgTlVMTCxcbiAgICAgICAgZGVzY3JpcHRpb24gTE9OR1RFWFQgTk9UIE5VTEwsXG4gICAgICAgIHNpemVzIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAgICAgXFxgY29uZGl0aW9uXFxgIFZBUkNIQVIoMTApIE5PVCBOVUxMLFxuICAgICAgICBwcmljZSBJTlQgTk9UIE5VTEwsXG4gICAgICAgIHN0b2NrIElOVCBOT1QgTlVMTCBERUZBVUxUIDAsXG4gICAgICAgIHBob3RvVXJsIFZBUkNIQVIoNTAwKSxcbiAgICAgICAgdXNlcklkIFZBUkNIQVIoMzYpIE5PVCBOVUxMLFxuICAgICAgICBjcmVhdGVkQXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgdXBkYXRlZEF0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAgT04gVVBEQVRFIENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgICBGT1JFSUdOIEtFWSAoY2F0ZWdvcnlJZCkgUkVGRVJFTkNFUyBjYXRlZ29yaWVzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICAgICAgRk9SRUlHTiBLRVkgKHVzZXJJZCkgUkVGRVJFTkNFUyB1c2VycyhpZCkgT04gREVMRVRFIENBU0NBREUsXG4gICAgICAgIElOREVYIGlkeF9jYXRlZ29yeUlkIChjYXRlZ29yeUlkKSxcbiAgICAgICAgSU5ERVggaWR4X3VzZXJJZCAodXNlcklkKSxcbiAgICAgICAgSU5ERVggaWR4X2NyZWF0ZWRBdCAoY3JlYXRlZEF0KVxuICAgICAgKVxuICAgIGApXG5cbiAgICAgIC8vIEFkZCBzdG9jayBjb2x1bW4gaWYgaXQgZG9lc24ndCBleGlzdCAoZm9yIGV4aXN0aW5nIGRhdGFiYXNlcylcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoYFxuICAgICAgICBBTFRFUiBUQUJMRSBwcm9kdWN0cyBcbiAgICAgICAgQUREIENPTFVNTiBJRiBOT1QgRVhJU1RTIHN0b2NrIElOVCBOT1QgTlVMTCBERUZBVUxUIDBcbiAgICAgIGApXG4gICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgIC8vIENvbHVtbiBtaWdodCBhbHJlYWR5IGV4aXN0LCBpZ25vcmUgZXJyb3JcbiAgICAgICAgaWYgKCFlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnRHVwbGljYXRlIGNvbHVtbiBuYW1lJykpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCBhZGQgc3RvY2sgY29sdW1uOicsIGVycm9yLm1lc3NhZ2UpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQWRkIGxvY2tvdXQgY29sdW1ucyBpZiB0aGV5IGRvbid0IGV4aXN0IChmb3IgZXhpc3RpbmcgZGF0YWJhc2VzKVxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShgXG4gICAgICAgIEFMVEVSIFRBQkxFIHVzZXJzIFxuICAgICAgICBBREQgQ09MVU1OIElGIE5PVCBFWElTVFMgZmFpbGVkTG9naW5BdHRlbXB0cyBJTlQgREVGQVVMVCAwXG4gICAgICBgKVxuICAgICAgICBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KGBcbiAgICAgICAgQUxURVIgVEFCTEUgdXNlcnMgXG4gICAgICAgIEFERCBDT0xVTU4gSUYgTk9UIEVYSVNUUyBsb2Nrb3V0VW50aWwgREFURVRJTUUgTlVMTFxuICAgICAgYClcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShgXG4gICAgICAgIEFMVEVSIFRBQkxFIHVzZXJzIFxuICAgICAgICBBREQgQ09MVU1OIElGIE5PVCBFWElTVFMgbGFzdExvZ2luQXQgREFURVRJTUUgTlVMTFxuICAgICAgYClcbiAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgaWYgKCFlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnRHVwbGljYXRlIGNvbHVtbiBuYW1lJykpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCBhZGQgbG9ja291dCBjb2x1bW5zOicsIGVycm9yLm1lc3NhZ2UpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShgXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBnYWxsZXJ5X3Bob3RvcyAoXG4gICAgICAgIGlkIFZBUkNIQVIoMzYpIFBSSU1BUlkgS0VZLFxuICAgICAgICB1cmwgVkFSQ0hBUig1MDApIE5PVCBOVUxMLFxuICAgICAgICBwcm9kdWN0SWQgVkFSQ0hBUigzNikgTk9UIE5VTEwsXG4gICAgICAgIGNyZWF0ZWRBdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgICBGT1JFSUdOIEtFWSAocHJvZHVjdElkKSBSRUZFUkVOQ0VTIHByb2R1Y3RzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICAgICAgSU5ERVggaWR4X3Byb2R1Y3RJZCAocHJvZHVjdElkKVxuICAgICAgKVxuICAgIGApXG5cbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoYFxuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgYXVkaXRfbG9ncyAoXG4gICAgICAgIGlkIFZBUkNIQVIoMzYpIFBSSU1BUlkgS0VZLFxuICAgICAgICBhY3Rpb24gVkFSQ0hBUig1MCkgTk9UIE5VTEwsXG4gICAgICAgIGVudGl0eSBWQVJDSEFSKDUwKSBOT1QgTlVMTCxcbiAgICAgICAgZW50aXR5SWQgVkFSQ0hBUigzNikgTk9UIE5VTEwsXG4gICAgICAgIGNoYW5nZXMgSlNPTixcbiAgICAgICAgdXNlcklkIFZBUkNIQVIoMzYpIE5PVCBOVUxMLFxuICAgICAgICBjcmVhdGVkQXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgRk9SRUlHTiBLRVkgKHVzZXJJZCkgUkVGRVJFTkNFUyB1c2VycyhpZCkgT04gREVMRVRFIENBU0NBREUsXG4gICAgICAgIElOREVYIGlkeF91c2VySWQgKHVzZXJJZCksXG4gICAgICAgIElOREVYIGlkeF9jcmVhdGVkQXQgKGNyZWF0ZWRBdClcbiAgICAgIClcbiAgICBgKVxuXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KGBcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGNhcnRzIChcbiAgICAgICAgaWQgVkFSQ0hBUigzNikgUFJJTUFSWSBLRVksXG4gICAgICAgIHVzZXJJZCBWQVJDSEFSKDM2KSBOT1QgTlVMTCxcbiAgICAgICAgcHJvZHVjdElkIFZBUkNIQVIoMzYpIE5PVCBOVUxMLFxuICAgICAgICBxdWFudGl0eSBJTlQgTk9UIE5VTEwgREVGQVVMVCAxLFxuICAgICAgICBjcmVhdGVkQXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgdXBkYXRlZEF0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAgT04gVVBEQVRFIENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgICBGT1JFSUdOIEtFWSAodXNlcklkKSBSRUZFUkVOQ0VTIHVzZXJzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICAgICAgRk9SRUlHTiBLRVkgKHByb2R1Y3RJZCkgUkVGRVJFTkNFUyBwcm9kdWN0cyhpZCkgT04gREVMRVRFIENBU0NBREUsXG4gICAgICAgIElOREVYIGlkeF91c2VySWQgKHVzZXJJZCksXG4gICAgICAgIElOREVYIGlkeF9wcm9kdWN0SWQgKHByb2R1Y3RJZClcbiAgICAgIClcbiAgICBgKVxuXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KGBcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG9yZGVycyAoXG4gICAgICAgIGlkIFZBUkNIQVIoMzYpIFBSSU1BUlkgS0VZLFxuICAgICAgICB1c2VySWQgVkFSQ0hBUigzNikgTk9UIE5VTEwsXG4gICAgICAgIHRvdGFsQW1vdW50IElOVCBOT1QgTlVMTCxcbiAgICAgICAgc2hpcHBpbmdBZGRyZXNzIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAgICAgc2hpcHBpbmdDaXR5IFZBUkNIQVIoMTAwKSBOT1QgTlVMTCxcbiAgICAgICAgc2hpcHBpbmdQb3N0YWwgVkFSQ0hBUigyMCkgTk9UIE5VTEwsXG4gICAgICAgIHNoaXBwaW5nUGhvbmUgVkFSQ0hBUigyMCkgTk9UIE5VTEwsXG4gICAgICAgIHBheW1lbnRTdGF0dXMgVkFSQ0hBUigyMCkgREVGQVVMVCAnUEVORElORycsXG4gICAgICAgIG9yZGVyU3RhdHVzIFZBUkNIQVIoMjApIERFRkFVTFQgJ1BFTkRJTkcnLFxuICAgICAgICBwYXltZW50SWQgVkFSQ0hBUigyNTUpIE5VTEwsXG4gICAgICAgIHBheW1lbnRVcmwgVEVYVCBOVUxMLFxuICAgICAgICBub3RlcyBURVhUIE5VTEwsXG4gICAgICAgIHByb2Nlc3NlZEF0IERBVEVUSU1FIE5VTEwsXG4gICAgICAgIHByb2Nlc3NlZEJ5IFZBUkNIQVIoMzYpIE5VTEwsXG4gICAgICAgIHJhdGluZyBJTlQgTlVMTCxcbiAgICAgICAgcmV2aWV3VGV4dCBURVhUIE5VTEwsXG4gICAgICAgIHJldmlld2VkQXQgREFURVRJTUUgTlVMTCxcbiAgICAgICAgY3JlYXRlZEF0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIHVwZGF0ZWRBdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QIE9OIFVQREFURSBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgRk9SRUlHTiBLRVkgKHVzZXJJZCkgUkVGRVJFTkNFUyB1c2VycyhpZCkgT04gREVMRVRFIENBU0NBREUsXG4gICAgICAgIElOREVYIGlkeF91c2VySWQgKHVzZXJJZCksXG4gICAgICAgIElOREVYIGlkeF9jcmVhdGVkQXQgKGNyZWF0ZWRBdClcbiAgICAgIClcbiAgICBgKVxuXG4gICAgICAvLyBFbnN1cmUgcGF5bWVudCBjb2x1bW5zIGV4aXN0IChmb3IgZXhpc3RpbmcgZGF0YWJhc2VzKVxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShgQUxURVIgVEFCTEUgb3JkZXJzIEFERCBDT0xVTU4gSUYgTk9UIEVYSVNUUyBwYXltZW50SWQgVkFSQ0hBUigyNTUpIE5VTExgKVxuICAgICAgICBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KGBBTFRFUiBUQUJMRSBvcmRlcnMgQUREIENPTFVNTiBJRiBOT1QgRVhJU1RTIHBheW1lbnRVcmwgVEVYVCBOVUxMYClcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdDb3VsZCBub3QgZW5zdXJlIHBheW1lbnQgY29sdW1uczonLCBlKVxuICAgICAgfVxuXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KGBcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG9yZGVyX2l0ZW1zIChcbiAgICAgICAgaWQgVkFSQ0hBUigzNikgUFJJTUFSWSBLRVksXG4gICAgICAgIG9yZGVySWQgVkFSQ0hBUigzNikgTk9UIE5VTEwsXG4gICAgICAgIHByb2R1Y3RJZCBWQVJDSEFSKDM2KSBOT1QgTlVMTCxcbiAgICAgICAgcXVhbnRpdHkgSU5UIE5PVCBOVUxMLFxuICAgICAgICBwcmljZSBJTlQgTk9UIE5VTEwsXG4gICAgICAgIGNyZWF0ZWRBdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgICBGT1JFSUdOIEtFWSAob3JkZXJJZCkgUkVGRVJFTkNFUyBvcmRlcnMoaWQpIE9OIERFTEVURSBDQVNDQURFLFxuICAgICAgICBGT1JFSUdOIEtFWSAocHJvZHVjdElkKSBSRUZFUkVOQ0VTIHByb2R1Y3RzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICAgICAgSU5ERVggaWR4X29yZGVySWQgKG9yZGVySWQpLFxuICAgICAgICBJTkRFWCBpZHhfcHJvZHVjdElkIChwcm9kdWN0SWQpXG4gICAgICApXG4gICAgYClcblxuICAgICAgLy8gRW5zdXJlIGFsbCBvcmRlciBjb2x1bW5zIGV4aXN0IChiZXN0LWVmZm9ydClcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoYEFMVEVSIFRBQkxFIG9yZGVycyBBREQgQ09MVU1OIElGIE5PVCBFWElTVFMgbm90ZXMgVEVYVCBOVUxMYClcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShgQUxURVIgVEFCTEUgb3JkZXJzIEFERCBDT0xVTU4gSUYgTk9UIEVYSVNUUyBwcm9jZXNzZWRBdCBEQVRFVElNRSBOVUxMYClcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShgQUxURVIgVEFCTEUgb3JkZXJzIEFERCBDT0xVTU4gSUYgTk9UIEVYSVNUUyBwcm9jZXNzZWRCeSBWQVJDSEFSKDM2KSBOVUxMYClcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShgQUxURVIgVEFCTEUgb3JkZXJzIEFERCBDT0xVTU4gSUYgTk9UIEVYSVNUUyByYXRpbmcgSU5UIE5VTExgKVxuICAgICAgICBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KGBBTFRFUiBUQUJMRSBvcmRlcnMgQUREIENPTFVNTiBJRiBOT1QgRVhJU1RTIHJldmlld1RleHQgVEVYVCBOVUxMYClcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShgQUxURVIgVEFCTEUgb3JkZXJzIEFERCBDT0xVTU4gSUYgTk9UIEVYSVNUUyByZXZpZXdlZEF0IERBVEVUSU1FIE5VTExgKVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IFtyb3dzXTogYW55ID0gYXdhaXQgY29ubmVjdGlvbi5xdWVyeShcbiAgICAgICAgICAgIGBTRUxFQ1QgQ09MVU1OX05BTUUgRlJPTSBJTkZPUk1BVElPTl9TQ0hFTUEuQ09MVU1OUyBXSEVSRSBUQUJMRV9TQ0hFTUEgPSA/IEFORCBUQUJMRV9OQU1FID0gJ29yZGVycydgLFxuICAgICAgICAgICAgW3Byb2Nlc3MuZW52LkRCX05BTUUgfHwgJ2dyYWt5X3N0b3JlJ11cbiAgICAgICAgICApXG4gICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSAocm93cyB8fCBbXSkubWFwKChyOiBhbnkpID0+IHIuQ09MVU1OX05BTUUpXG4gICAgICAgICAgaWYgKCFleGlzdGluZy5pbmNsdWRlcygnbm90ZXMnKSkge1xuICAgICAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShgQUxURVIgVEFCTEUgb3JkZXJzIEFERCBDT0xVTU4gbm90ZXMgVEVYVCBOVUxMYClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFleGlzdGluZy5pbmNsdWRlcygncHJvY2Vzc2VkQXQnKSkge1xuICAgICAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShgQUxURVIgVEFCTEUgb3JkZXJzIEFERCBDT0xVTU4gcHJvY2Vzc2VkQXQgREFURVRJTUUgTlVMTGApXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghZXhpc3RpbmcuaW5jbHVkZXMoJ3Byb2Nlc3NlZEJ5JykpIHtcbiAgICAgICAgICAgIGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoYEFMVEVSIFRBQkxFIG9yZGVycyBBREQgQ09MVU1OIHByb2Nlc3NlZEJ5IFZBUkNIQVIoMzYpIE5VTExgKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWV4aXN0aW5nLmluY2x1ZGVzKCdyYXRpbmcnKSkge1xuICAgICAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShgQUxURVIgVEFCTEUgb3JkZXJzIEFERCBDT0xVTU4gcmF0aW5nIElOVCBOVUxMYClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFleGlzdGluZy5pbmNsdWRlcygncmV2aWV3VGV4dCcpKSB7XG4gICAgICAgICAgICBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KGBBTFRFUiBUQUJMRSBvcmRlcnMgQUREIENPTFVNTiByZXZpZXdUZXh0IFRFWFQgTlVMTGApXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghZXhpc3RpbmcuaW5jbHVkZXMoJ3Jldmlld2VkQXQnKSkge1xuICAgICAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShgQUxURVIgVEFCTEUgb3JkZXJzIEFERCBDT0xVTU4gcmV2aWV3ZWRBdCBEQVRFVElNRSBOVUxMYClcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUyKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdDb3VsZCBub3QgZW5zdXJlIG9yZGVyIGNvbHVtbnMgKG5vbi1mYXRhbCk6JywgZTIpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSW5zZXJ0IGRlZmF1bHQgY2F0ZWdvcmllcyBpZiBub3QgZXhpc3RcbiAgICAgIGNvbnN0IFtjYXRlZ29yaWVzXTogYW55ID0gYXdhaXQgY29ubmVjdGlvbi5xdWVyeSgnU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gY2F0ZWdvcmllcycpXG4gICAgICBpZiAoY2F0ZWdvcmllc1swXS5jb3VudCA9PT0gMCkge1xuICAgICAgICBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KGBcbiAgICAgICAgSU5TRVJUIElOVE8gY2F0ZWdvcmllcyAoaWQsIG5hbWUsIGljb24pIFZBTFVFU1xuICAgICAgICAoJ2NhdC10b3BpJywgJ1RvcGknLCAn8J+OqScpLFxuICAgICAgICAoJ2NhdC1rYW9zJywgJ0thb3MnLCAn8J+RlScpLFxuICAgICAgICAoJ2NhdC1rZW1lamEnLCAnS2VtZWphJywgJ/CfkZQnKSxcbiAgICAgICAgKCdjYXQtamFja2V0JywgJ0phY2tldCcsICfwn6elJyksXG4gICAgICAgICgnY2F0LWhvb2RpZScsICdIb29kaWUnLCAn8J+OvScpLFxuICAgICAgICAoJ2NhdC1qZWFucycsICdDZWxhbmEgSmVhbnMnLCAn8J+RlicpLFxuICAgICAgICAoJ2NhdC1zaG9ydHMnLCAnQ2VsYW5hIFBlbmRlaycsICfwn6mzJyksXG4gICAgICAgICgnY2F0LXNob2VzJywgJ1NlcGF0dScsICfwn5GfJylcbiAgICAgIGApXG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICBjb25zb2xlLmxvZygn4pyTIERhdGFiYXNlIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpXG4gICAgICB9XG5cbiAgICAgIGlzSW5pdGlhbGl6ZWQgPSB0cnVlXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KclyBEYXRhYmFzZSBpbml0aWFsaXphdGlvbiBlcnJvcjonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpXG4gICAgfVxuICB9KSgpXG5cbiAgcmV0dXJuIGluaXRQcm9taXNlXG59XG5cbi8vIFVzZXIgZnVuY3Rpb25zXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVXNlcihuYW1lOiBzdHJpbmcsIGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcsIHJvbGU6IHN0cmluZyA9ICdVU0VSJykge1xuICAvLyBFbnN1cmUgZGF0YWJhc2UgaXMgaW5pdGlhbGl6ZWQgYmVmb3JlIGFueSBvcGVyYXRpb24gKGNyaXRpY2FsIGZvciBWZXJjZWwgc2VydmVybGVzcylcbiAgaWYgKCFpbml0aWFsaXphdGlvbkF0dGVtcHRlZCkge1xuICAgIGluaXRpYWxpemF0aW9uQXR0ZW1wdGVkID0gdHJ1ZVxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBpbml0aWFsaXplRGF0YWJhc2UoKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbREIgSW5pdF0gRmFpbGVkIHRvIGluaXRpYWxpemUgZGF0YWJhc2U6JywgZXJyb3IpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIGluaXRpYWxpemF0aW9uIGZhaWxlZCcpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpXG4gIHRyeSB7XG4gICAgLy8gSGFzaCBwYXNzd29yZCBqaWthIGJlbHVtIHRlci1oYXNoICh1c2UgMTIgcm91bmRzIGZvciBiZXR0ZXIgc2VjdXJpdHkpXG4gICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBwYXNzd29yZC5zdGFydHNXaXRoKCckMicpID8gcGFzc3dvcmQgOiBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTIpXG5cbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKVxuICAgIGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoXG4gICAgICAnSU5TRVJUIElOVE8gdXNlcnMgKGlkLCBuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIHJvbGUpIFZBTFVFUyAoPywgPywgPywgPywgPyknLFxuICAgICAgW2lkLCBuYW1lLCBlbWFpbCwgaGFzaGVkUGFzc3dvcmQsIHJvbGVdXG4gICAgKVxuICAgIHJldHVybiB7IGlkLCBuYW1lLCBlbWFpbCwgcm9sZSB9XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ0VSX0RVUF9FTlRSWScpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRW1haWwgc3VkYWggdGVyZGFmdGFyJylcbiAgICB9XG4gICAgdGhyb3cgZXJyb3JcbiAgfSBmaW5hbGx5IHtcbiAgICBjb25uZWN0aW9uLnJlbGVhc2UoKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQnlFbWFpbChlbWFpbDogc3RyaW5nKSB7XG4gIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKVxuICB0cnkge1xuICAgIGNvbnN0IFtyb3dzXTogYW55ID0gYXdhaXQgY29ubmVjdGlvbi5xdWVyeShcbiAgICAgICdTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIGVtYWlsID0gPycsXG4gICAgICBbZW1haWxdXG4gICAgKVxuICAgIHJldHVybiByb3dzLmxlbmd0aCA+IDAgPyByb3dzWzBdIDogbnVsbFxuICB9IGZpbmFsbHkge1xuICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJCeUlkKGlkOiBzdHJpbmcpIHtcbiAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpXG4gIHRyeSB7XG4gICAgY29uc3QgW3Jvd3NdOiBhbnkgPSBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFxuICAgICAgJ1NFTEVDVCBpZCwgbmFtZSwgZW1haWwsIHJvbGUsIGlzQWN0aXZlIEZST00gdXNlcnMgV0hFUkUgaWQgPSA/JyxcbiAgICAgIFtpZF1cbiAgICApXG4gICAgcmV0dXJuIHJvd3MubGVuZ3RoID4gMCA/IHJvd3NbMF0gOiBudWxsXG4gIH0gZmluYWxseSB7XG4gICAgY29ubmVjdGlvbi5yZWxlYXNlKClcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsVXNlcnMoKSB7XG4gIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKVxuICB0cnkge1xuICAgIGNvbnN0IFtyb3dzXTogYW55ID0gYXdhaXQgY29ubmVjdGlvbi5xdWVyeShcbiAgICAgICdTRUxFQ1QgaWQsIG5hbWUsIGVtYWlsLCByb2xlLCBpc0FjdGl2ZSwgY3JlYXRlZEF0IEZST00gdXNlcnMgT1JERVIgQlkgY3JlYXRlZEF0IERFU0MnXG4gICAgKVxuICAgIHJldHVybiByb3dzXG4gIH0gZmluYWxseSB7XG4gICAgY29ubmVjdGlvbi5yZWxlYXNlKClcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlcihpZDogc3RyaW5nLCBkYXRhOiBhbnkpIHtcbiAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpXG4gIHRyeSB7XG4gICAgY29uc3QgZmllbGRzID0gT2JqZWN0LmtleXMoZGF0YSkubWFwKGtleSA9PiBgJHtrZXl9ID0gP2ApLmpvaW4oJywgJylcbiAgICBjb25zdCB2YWx1ZXMgPSBPYmplY3QudmFsdWVzKGRhdGEpXG4gICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShcbiAgICAgIGBVUERBVEUgdXNlcnMgU0VUICR7ZmllbGRzfSwgdXBkYXRlZEF0ID0gTk9XKCkgV0hFUkUgaWQgPSA/YCxcbiAgICAgIFsuLi52YWx1ZXMsIGlkXVxuICAgIClcbiAgICByZXR1cm4geyBpZCwgLi4uZGF0YSB9XG4gIH0gZmluYWxseSB7XG4gICAgY29ubmVjdGlvbi5yZWxlYXNlKClcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVXNlcihpZDogc3RyaW5nKSB7XG4gIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKVxuICB0cnkge1xuICAgIGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoJ0RFTEVURSBGUk9NIHVzZXJzIFdIRVJFIGlkID0gPycsIFtpZF0pXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gIH0gZmluYWxseSB7XG4gICAgY29ubmVjdGlvbi5yZWxlYXNlKClcbiAgfVxufVxuXG4vLyBQcm9kdWN0IGZ1bmN0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVByb2R1Y3QocHJvZHVjdERhdGE6IGFueSkge1xuICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKClcbiAgdHJ5IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKVxuXG4gICAgLy8gU2ltcGFuIHByb2R1a1xuICAgIGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoXG4gICAgICAnSU5TRVJUIElOVE8gcHJvZHVjdHMgKGlkLCBuYW1lLCBjYXRlZ29yeUlkLCBkZXNjcmlwdGlvbiwgc2l6ZXMsIGBjb25kaXRpb25gLCBwcmljZSwgc3RvY2ssIHBob3RvVXJsLCB1c2VySWQpIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgPywgPyknLFxuICAgICAgW1xuICAgICAgICBpZCxcbiAgICAgICAgcHJvZHVjdERhdGEubmFtZSxcbiAgICAgICAgcHJvZHVjdERhdGEuY2F0ZWdvcnlJZCxcbiAgICAgICAgcHJvZHVjdERhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHByb2R1Y3REYXRhLnNpemVzKSxcbiAgICAgICAgcHJvZHVjdERhdGEuY29uZGl0aW9uLFxuICAgICAgICBwcm9kdWN0RGF0YS5wcmljZSxcbiAgICAgICAgcHJvZHVjdERhdGEuc3RvY2sgfHwgMCxcbiAgICAgICAgcHJvZHVjdERhdGEucGhvdG9VcmxzPy5bMF0gfHwgbnVsbCwgLy8gU2ltcGFuIGZvdG8gcGVydGFtYSBzZWJhZ2FpIHBob3RvVXJsXG4gICAgICAgIHByb2R1Y3REYXRhLnVzZXJJZCxcbiAgICAgIF1cbiAgICApXG5cbiAgICAvLyBTaW1wYW4gZm90byB0YW1iYWhhbiBrZSBnYWxsZXJ5X3Bob3Rvc1xuICAgIGlmIChwcm9kdWN0RGF0YS5waG90b1VybHMgJiYgcHJvZHVjdERhdGEucGhvdG9VcmxzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcHJvZHVjdERhdGEucGhvdG9VcmxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoXG4gICAgICAgICAgJ0lOU0VSVCBJTlRPIGdhbGxlcnlfcGhvdG9zIChpZCwgdXJsLCBwcm9kdWN0SWQpIFZBTFVFUyAoPywgPywgPyknLFxuICAgICAgICAgIFtyYW5kb21VVUlEKCksIHByb2R1Y3REYXRhLnBob3RvVXJsc1tpXSwgaWRdXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBpZCwgLi4ucHJvZHVjdERhdGEgfVxuICB9IGZpbmFsbHkge1xuICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpXG4gIH1cbn1cblxuLy8gR0VUIGFsbCBwcm9kdWN0cyAocHVibGljKVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbFByb2R1Y3RzKCkge1xuICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKClcbiAgdHJ5IHtcbiAgICBjb25zdCBbcm93c10gPSBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFxuICAgICAgYFNFTEVDVCBcbiAgICAgICAgaWQsIG5hbWUsIGNhdGVnb3J5SWQsIGRlc2NyaXB0aW9uLCBzaXplcywgXG4gICAgICAgIFxcYGNvbmRpdGlvblxcYCwgcHJpY2UsIHN0b2NrLCBwaG90b1VybCwgdXNlcklkLCBjcmVhdGVkQXRcbiAgICAgICBGUk9NIHByb2R1Y3RzIFxuICAgICAgIE9SREVSIEJZIGNyZWF0ZWRBdCBERVNDYFxuICAgIClcblxuICAgIGNvbnN0IHByb2R1Y3RzID0gKHJvd3MgYXMgYW55W10pLm1hcChyb3cgPT4gKHtcbiAgICAgIGlkOiByb3cuaWQsXG4gICAgICBuYW1lOiByb3cubmFtZSxcbiAgICAgIGNhdGVnb3J5SWQ6IHJvdy5jYXRlZ29yeUlkLFxuICAgICAgZGVzY3JpcHRpb246IHJvdy5kZXNjcmlwdGlvbixcbiAgICAgIGNvbmRpdGlvbjogcm93LmNvbmRpdGlvbixcbiAgICAgIHByaWNlOiByb3cucHJpY2UsXG4gICAgICBzdG9jazogcm93LnN0b2NrID8/IDAsXG4gICAgICBzaXplczogdHlwZW9mIHJvdy5zaXplcyA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKHJvdy5zaXplcykgOiAocm93LnNpemVzIHx8IFtdKSxcbiAgICAgIHBob3RvVXJsOiByb3cucGhvdG9VcmwsXG4gICAgICB1c2VySWQ6IHJvdy51c2VySWQsXG4gICAgICBjcmVhdGVkQXQ6IHJvdy5jcmVhdGVkQXQsXG4gICAgICByYXRpbmc6IDQuNSxcbiAgICAgIHNvbGQ6IDAsXG4gICAgfSkpXG5cbiAgICAvLyBGZXRjaCBnYWxsZXJ5IHBob3RvcyBmb3IgYWxsIHByb2R1Y3RzIGluIG9uZSBxdWVyeVxuICAgIGNvbnN0IHByb2R1Y3RJZHMgPSBwcm9kdWN0cy5tYXAocCA9PiBwLmlkKVxuICAgIGlmIChwcm9kdWN0SWRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdXG5cbiAgICAvLyBWYWxpZGF0ZSBhbGwgcHJvZHVjdElkcyBhcmUgVVVJRHMgdG8gcHJldmVudCBTUUwgaW5qZWN0aW9uXG4gICAgY29uc3QgdmFsaWRQcm9kdWN0SWRzID0gcHJvZHVjdElkcy5maWx0ZXIoaWQgPT5cbiAgICAgIHR5cGVvZiBpZCA9PT0gJ3N0cmluZycgJiYgL15bYS1mMC05LV17MzZ9JC9pLnRlc3QoaWQpXG4gICAgKVxuXG4gICAgbGV0IHBob3Rvc0J5UHJvZHVjdDogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge31cbiAgICBpZiAodmFsaWRQcm9kdWN0SWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHBsYWNlaG9sZGVycyA9IHZhbGlkUHJvZHVjdElkcy5tYXAoKCkgPT4gJz8nKS5qb2luKCcsJylcbiAgICAgIGNvbnN0IFtwaG90b3NSb3dzXTogYW55ID0gYXdhaXQgY29ubmVjdGlvbi5xdWVyeShcbiAgICAgICAgYFNFTEVDVCBwcm9kdWN0SWQsIHVybCBGUk9NIGdhbGxlcnlfcGhvdG9zIFdIRVJFIHByb2R1Y3RJZCBJTiAoJHtwbGFjZWhvbGRlcnN9KWAsXG4gICAgICAgIHZhbGlkUHJvZHVjdElkc1xuICAgICAgKVxuXG4gICAgICBmb3IgKGNvbnN0IHByIG9mIHBob3Rvc1Jvd3MpIHtcbiAgICAgICAgcGhvdG9zQnlQcm9kdWN0W3ByLnByb2R1Y3RJZF0gPSBwaG90b3NCeVByb2R1Y3RbcHIucHJvZHVjdElkXSB8fCBbXVxuICAgICAgICBwaG90b3NCeVByb2R1Y3RbcHIucHJvZHVjdElkXS5wdXNoKHByLnVybClcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBCdWlsZCBmdWxsIHBob3RvVXJscyBhcnJheTogcHJpbWFyeSBwaG90b1VybCBmaXJzdCBpZiBleGlzdHMsIHRoZW4gZ2FsbGVyeSBwaG90b3NcbiAgICByZXR1cm4gcHJvZHVjdHMubWFwKHAgPT4ge1xuICAgICAgY29uc3QgZ2FsbGVyeSA9IHBob3Rvc0J5UHJvZHVjdFtwLmlkXSB8fCBbXVxuICAgICAgY29uc3QgcGhvdG9VcmxzID0gW11cbiAgICAgIGlmIChwLnBob3RvVXJsKSBwaG90b1VybHMucHVzaChwLnBob3RvVXJsKVxuICAgICAgcGhvdG9VcmxzLnB1c2goLi4uZ2FsbGVyeSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBwLmlkLFxuICAgICAgICBuYW1lOiBwLm5hbWUsXG4gICAgICAgIGNhdGVnb3J5SWQ6IHAuY2F0ZWdvcnlJZCxcbiAgICAgICAgZGVzY3JpcHRpb246IHAuZGVzY3JpcHRpb24sXG4gICAgICAgIGNvbmRpdGlvbjogcC5jb25kaXRpb24sXG4gICAgICAgIHByaWNlOiBwLnByaWNlLFxuICAgICAgICBzdG9jazogcC5zdG9jayA/PyAwLFxuICAgICAgICBzaXplczogcC5zaXplcyxcbiAgICAgICAgcGhvdG9VcmxzLFxuICAgICAgICB1c2VySWQ6IHAudXNlcklkLFxuICAgICAgICBjcmVhdGVkQXQ6IHAuY3JlYXRlZEF0LFxuICAgICAgICByYXRpbmc6IHAucmF0aW5nLFxuICAgICAgICBzb2xkOiBwLnNvbGQsXG4gICAgICB9XG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGFsbCBwcm9kdWN0czonLCBlcnJvcilcbiAgICByZXR1cm4gW11cbiAgfSBmaW5hbGx5IHtcbiAgICBjb25uZWN0aW9uLnJlbGVhc2UoKVxuICB9XG59XG5cbi8vIEdFVCBwcm9kdWN0cyBieSB1c2VyIElEXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZHVjdHNCeVVzZXJJZCh1c2VySWQ6IHN0cmluZykge1xuICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKClcbiAgdHJ5IHtcbiAgICBjb25zdCBbcm93c10gPSBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFxuICAgICAgYFNFTEVDVCBcbiAgICAgICAgaWQsIG5hbWUsIGNhdGVnb3J5SWQsIGRlc2NyaXB0aW9uLCBzaXplcywgXG4gICAgICAgIFxcYGNvbmRpdGlvblxcYCwgcHJpY2UsIHN0b2NrLCBwaG90b1VybCwgdXNlcklkLCBjcmVhdGVkQXRcbiAgICAgICBGUk9NIHByb2R1Y3RzIFxuICAgICAgIFdIRVJFIHVzZXJJZCA9ID9cbiAgICAgICBPUkRFUiBCWSBjcmVhdGVkQXQgREVTQ2AsXG4gICAgICBbdXNlcklkXVxuICAgIClcbiAgICBjb25zdCBwcm9kdWN0cyA9IChyb3dzIGFzIGFueVtdKS5tYXAocm93ID0+ICh7XG4gICAgICAuLi5yb3csXG4gICAgICBzaXplczogdHlwZW9mIHJvdy5zaXplcyA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKHJvdy5zaXplcykgOiByb3cuc2l6ZXMsXG4gICAgICBzdG9jazogcm93LnN0b2NrID8/IDAsXG4gICAgICBwaG90b1VybDogcm93LnBob3RvVXJsLFxuICAgIH0pKVxuXG4gICAgY29uc3QgcHJvZHVjdElkcyA9IHByb2R1Y3RzLm1hcChwID0+IHAuaWQpXG4gICAgaWYgKHByb2R1Y3RJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gcHJvZHVjdHMubWFwKHAgPT4gKHsgLi4ucCwgcGhvdG9VcmxzOiBwLnBob3RvVXJsID8gW3AucGhvdG9VcmxdIDogW10gfSkpXG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgYWxsIHByb2R1Y3RJZHMgYXJlIFVVSURzIHRvIHByZXZlbnQgU1FMIGluamVjdGlvblxuICAgIGNvbnN0IHZhbGlkUHJvZHVjdElkcyA9IHByb2R1Y3RJZHMuZmlsdGVyKGlkID0+XG4gICAgICB0eXBlb2YgaWQgPT09ICdzdHJpbmcnICYmIC9eW2EtZjAtOS1dezM2fSQvaS50ZXN0KGlkKVxuICAgIClcblxuICAgIGxldCBwaG90b3NCeVByb2R1Y3Q6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHt9XG4gICAgaWYgKHZhbGlkUHJvZHVjdElkcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBwbGFjZWhvbGRlcnMgPSB2YWxpZFByb2R1Y3RJZHMubWFwKCgpID0+ICc/Jykuam9pbignLCcpXG4gICAgICBjb25zdCBbcGhvdG9zUm93c106IGFueSA9IGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoXG4gICAgICAgIGBTRUxFQ1QgcHJvZHVjdElkLCB1cmwgRlJPTSBnYWxsZXJ5X3Bob3RvcyBXSEVSRSBwcm9kdWN0SWQgSU4gKCR7cGxhY2Vob2xkZXJzfSlgLFxuICAgICAgICB2YWxpZFByb2R1Y3RJZHNcbiAgICAgIClcblxuICAgICAgZm9yIChjb25zdCBwciBvZiBwaG90b3NSb3dzKSB7XG4gICAgICAgIHBob3Rvc0J5UHJvZHVjdFtwci5wcm9kdWN0SWRdID0gcGhvdG9zQnlQcm9kdWN0W3ByLnByb2R1Y3RJZF0gfHwgW11cbiAgICAgICAgcGhvdG9zQnlQcm9kdWN0W3ByLnByb2R1Y3RJZF0ucHVzaChwci51cmwpXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb2R1Y3RzLm1hcChwID0+IHtcbiAgICAgIGNvbnN0IGdhbGxlcnkgPSBwaG90b3NCeVByb2R1Y3RbcC5pZF0gfHwgW11cbiAgICAgIGNvbnN0IHBob3RvVXJscyA9IFtdXG4gICAgICBpZiAocC5waG90b1VybCkgcGhvdG9VcmxzLnB1c2gocC5waG90b1VybClcbiAgICAgIHBob3RvVXJscy5wdXNoKC4uLmdhbGxlcnkpXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5wLFxuICAgICAgICBwaG90b1VybHMsXG4gICAgICB9XG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHByb2R1Y3RzIGJ5IHVzZXI6JywgZXJyb3IpXG4gICAgcmV0dXJuIFtdXG4gIH0gZmluYWxseSB7XG4gICAgY29ubmVjdGlvbi5yZWxlYXNlKClcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZHVjdEJ5SWQoaWQ6IHN0cmluZykge1xuICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKClcbiAgdHJ5IHtcbiAgICBjb25zdCBbcm93c106IGFueSA9IGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoXG4gICAgICAnU0VMRUNUICogRlJPTSBwcm9kdWN0cyBXSEVSRSBpZCA9ID8nLFxuICAgICAgW2lkXVxuICAgIClcbiAgICBpZiAocm93cy5sZW5ndGggPT09IDApIHJldHVybiBudWxsXG5cbiAgICBjb25zdCByb3cgPSByb3dzWzBdXG4gICAgY29uc3Qgc2l6ZXMgPSB0eXBlb2Ygcm93LnNpemVzID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2Uocm93LnNpemVzKSA6IChyb3cuc2l6ZXMgfHwgW10pXG4gICAgLy8gRmV0Y2ggZ2FsbGVyeSBwaG90b3MgZm9yIHRoaXMgcHJvZHVjdFxuICAgIGNvbnN0IFtwaG90b1Jvd3NdOiBhbnkgPSBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFxuICAgICAgJ1NFTEVDVCB1cmwgRlJPTSBnYWxsZXJ5X3Bob3RvcyBXSEVSRSBwcm9kdWN0SWQgPSA/IE9SREVSIEJZIGNyZWF0ZWRBdCBBU0MnLFxuICAgICAgW2lkXVxuICAgIClcbiAgICBjb25zdCBnYWxsZXJ5VXJscyA9IChwaG90b1Jvd3MgfHwgW10pLm1hcCgocjogYW55KSA9PiByLnVybClcbiAgICBjb25zdCBwaG90b1VybHMgPSBbXVxuICAgIGlmIChyb3cucGhvdG9VcmwpIHBob3RvVXJscy5wdXNoKHJvdy5waG90b1VybClcbiAgICBwaG90b1VybHMucHVzaCguLi5nYWxsZXJ5VXJscylcblxuICAgIHJldHVybiB7XG4gICAgICAuLi5yb3csXG4gICAgICBzaXplcyxcbiAgICAgIHBob3RvVXJscyxcbiAgICAgIHN0b2NrOiByb3cuc3RvY2sgPz8gMCxcbiAgICAgIHJhdGluZzogNC41LFxuICAgICAgc29sZDogMCxcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBwcm9kdWN0IGJ5IElEOicsIGVycm9yKVxuICAgIHJldHVybiBudWxsXG4gIH0gZmluYWxseSB7XG4gICAgY29ubmVjdGlvbi5yZWxlYXNlKClcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlUHJvZHVjdChpZDogc3RyaW5nLCBkYXRhOiBhbnkpIHtcbiAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpXG4gIHRyeSB7XG4gICAgLy8gUHJlcGFyZSB1cGRhdGUgZmllbGRzXG4gICAgY29uc3QgdXBkYXRlRmllbGRzOiBzdHJpbmdbXSA9IFtdXG4gICAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdXG5cbiAgICAvLyBIYW5kbGUgZWFjaCBmaWVsZFxuICAgIGlmIChkYXRhLm5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdXBkYXRlRmllbGRzLnB1c2goJ25hbWUgPSA/JylcbiAgICAgIHZhbHVlcy5wdXNoKGRhdGEubmFtZSlcbiAgICB9XG4gICAgaWYgKGRhdGEuY2F0ZWdvcnlJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB1cGRhdGVGaWVsZHMucHVzaCgnY2F0ZWdvcnlJZCA9ID8nKVxuICAgICAgdmFsdWVzLnB1c2goZGF0YS5jYXRlZ29yeUlkKVxuICAgIH1cbiAgICBpZiAoZGF0YS5kZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB1cGRhdGVGaWVsZHMucHVzaCgnZGVzY3JpcHRpb24gPSA/JylcbiAgICAgIHZhbHVlcy5wdXNoKGRhdGEuZGVzY3JpcHRpb24pXG4gICAgfVxuICAgIGlmIChkYXRhLmNvbmRpdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB1cGRhdGVGaWVsZHMucHVzaCgnYGNvbmRpdGlvbmAgPSA/JylcbiAgICAgIHZhbHVlcy5wdXNoKGRhdGEuY29uZGl0aW9uKVxuICAgIH1cbiAgICBpZiAoZGF0YS5wcmljZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB1cGRhdGVGaWVsZHMucHVzaCgncHJpY2UgPSA/JylcbiAgICAgIHZhbHVlcy5wdXNoKGRhdGEucHJpY2UpXG4gICAgfVxuICAgIGlmIChkYXRhLnN0b2NrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHVwZGF0ZUZpZWxkcy5wdXNoKCdzdG9jayA9ID8nKVxuICAgICAgdmFsdWVzLnB1c2goZGF0YS5zdG9jaylcbiAgICB9XG4gICAgaWYgKGRhdGEuc2l6ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdXBkYXRlRmllbGRzLnB1c2goJ3NpemVzID0gPycpXG4gICAgICB2YWx1ZXMucHVzaChKU09OLnN0cmluZ2lmeShkYXRhLnNpemVzKSlcbiAgICB9XG4gICAgLy8gSWYgcGhvdG9VcmxzIHByb3ZpZGVkLCBzZXQgcHJpbWFyeSBwaG90byAoZmlyc3QpIGluIHByb2R1Y3RzLnBob3RvVXJsXG4gICAgaWYgKGRhdGEucGhvdG9VcmxzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IHByaW1hcnkgPSBkYXRhLnBob3RvVXJscy5sZW5ndGggPiAwID8gZGF0YS5waG90b1VybHNbMF0gOiBudWxsXG4gICAgICB1cGRhdGVGaWVsZHMucHVzaCgncGhvdG9VcmwgPSA/JylcbiAgICAgIHZhbHVlcy5wdXNoKHByaW1hcnkpXG4gICAgfVxuXG4gICAgLy8gQWx3YXlzIHVwZGF0ZSB0aW1lc3RhbXBcbiAgICB1cGRhdGVGaWVsZHMucHVzaCgndXBkYXRlZEF0ID0gTk9XKCknKVxuXG4gICAgLy8gQWRkIHByb2R1Y3QgaWQgYXMgbGFzdCBwYXJhbWV0ZXJcbiAgICB2YWx1ZXMucHVzaChpZClcblxuICAgIGlmICh1cGRhdGVGaWVsZHMubGVuZ3RoID4gMSkgeyAvLyBNb3JlIHRoYW4ganVzdCB1cGRhdGVkQXRcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gYFVQREFURSBwcm9kdWN0cyBTRVQgJHt1cGRhdGVGaWVsZHMuam9pbignLCAnKX0gV0hFUkUgaWQgPSA/YFxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShxdWVyeSwgdmFsdWVzKVxuICAgIH1cblxuICAgIC8vIElmIHBob3RvVXJscyBwcm92aWRlZCwgc3luY2hyb25pemUgZ2FsbGVyeV9waG90b3M6XG4gICAgaWYgKGRhdGEucGhvdG9VcmxzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIFJlbW92ZSBleGlzdGluZyBnYWxsZXJ5IHBob3RvcyBmb3IgdGhpcyBwcm9kdWN0XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KCdERUxFVEUgRlJPTSBnYWxsZXJ5X3Bob3RvcyBXSEVSRSBwcm9kdWN0SWQgPSA/JywgW2lkXSlcbiAgICAgIC8vIEluc2VydCByZW1haW5pbmcgcGhvdG9zIChmcm9tIGluZGV4IDEuLilcbiAgICAgIGlmIChkYXRhLnBob3RvVXJscy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGNvbnN0IGluc2VydHM6IGFueVtdID0gW11cbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBkYXRhLnBob3RvVXJscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGluc2VydHMucHVzaChbcmFuZG9tVVVJRCgpLCBkYXRhLnBob3RvVXJsc1tpXSwgaWRdKVxuICAgICAgICB9XG4gICAgICAgIC8vIEJ1bGsgaW5zZXJ0XG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVycyA9IGluc2VydHMubWFwKCgpID0+ICcoPywgPywgPyknKS5qb2luKCcsICcpXG4gICAgICAgIGNvbnN0IGZsYXRWYWx1ZXMgPSBpbnNlcnRzLmZsYXQoKVxuICAgICAgICBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFxuICAgICAgICAgIGBJTlNFUlQgSU5UTyBnYWxsZXJ5X3Bob3RvcyAoaWQsIHVybCwgcHJvZHVjdElkKSBWQUxVRVMgJHtwbGFjZWhvbGRlcnN9YCxcbiAgICAgICAgICBmbGF0VmFsdWVzXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBpZCwgLi4uZGF0YSB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignVXBkYXRlIHByb2R1Y3QgZXJyb3I6JywgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfSBmaW5hbGx5IHtcbiAgICBjb25uZWN0aW9uLnJlbGVhc2UoKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVQcm9kdWN0KGlkOiBzdHJpbmcpIHtcbiAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpXG4gIHRyeSB7XG4gICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeSgnREVMRVRFIEZST00gcHJvZHVjdHMgV0hFUkUgaWQgPSA/JywgW2lkXSlcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgfSBmaW5hbGx5IHtcbiAgICBjb25uZWN0aW9uLnJlbGVhc2UoKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYXRlZ29yaWVzKCkge1xuICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKClcbiAgdHJ5IHtcbiAgICBjb25zdCBbcm93c106IGFueSA9IGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoJ1NFTEVDVCAqIEZST00gY2F0ZWdvcmllcycpXG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkocm93cykgPyByb3dzIDogW11cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGdldENhdGVnb3JpZXMgZXJyb3I6JywgZXJyb3IpXG4gICAgLy8gUmV0dXJuIGVtcHR5IGFycmF5IG9uIGVycm9yIGZvciBncmFjZWZ1bCBmYWxsYmFja1xuICAgIHJldHVybiBbXVxuICB9IGZpbmFsbHkge1xuICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXJQYXNzd29yZEJ5RW1haWwoZW1haWw6IHN0cmluZywgaGFzaGVkUGFzc3dvcmQ6IHN0cmluZykge1xuICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKClcbiAgdHJ5IHtcbiAgICBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFxuICAgICAgJ1VQREFURSB1c2VycyBTRVQgcGFzc3dvcmQgPSA/LCB1cGRhdGVkQXQgPSBOT1coKSBXSEVSRSBlbWFpbCA9ID8nLFxuICAgICAgW2hhc2hlZFBhc3N3b3JkLCBlbWFpbF1cbiAgICApXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gIH0gZmluYWxseSB7XG4gICAgY29ubmVjdGlvbi5yZWxlYXNlKClcbiAgfVxufVxuXG4vLyBDYXJ0IGZ1bmN0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFRvQ2FydCh1c2VySWQ6IHN0cmluZywgcHJvZHVjdElkOiBzdHJpbmcsIHF1YW50aXR5OiBudW1iZXIgPSAxKSB7XG4gIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKVxuICB0cnkge1xuICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpXG4gICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShcbiAgICAgICdJTlNFUlQgSU5UTyBjYXJ0cyAoaWQsIHVzZXJJZCwgcHJvZHVjdElkLCBxdWFudGl0eSkgVkFMVUVTICg/LCA/LCA/LCA/KSBPTiBEVVBMSUNBVEUgS0VZIFVQREFURSBxdWFudGl0eSA9IHF1YW50aXR5ICsgPycsXG4gICAgICBbaWQsIHVzZXJJZCwgcHJvZHVjdElkLCBxdWFudGl0eSwgcXVhbnRpdHldXG4gICAgKVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICB9IGZpbmFsbHkge1xuICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhcnQodXNlcklkOiBzdHJpbmcpIHtcbiAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpXG4gIHRyeSB7XG4gICAgY29uc3QgW2NhcnRJdGVtc106IGFueSA9IGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoXG4gICAgICBgU0VMRUNUIFxuICAgICAgICBjLmlkLCBjLnF1YW50aXR5LCBcbiAgICAgICAgcC5pZCBhcyBwcm9kdWN0SWQsIHAubmFtZSwgcC5wcmljZSwgcC5waG90b1VybCwgXG4gICAgICAgIHAuY2F0ZWdvcnlJZCwgcC5jb25kaXRpb25cbiAgICAgIEZST00gY2FydHMgY1xuICAgICAgSk9JTiBwcm9kdWN0cyBwIE9OIGMucHJvZHVjdElkID0gcC5pZFxuICAgICAgV0hFUkUgYy51c2VySWQgPSA/XG4gICAgICBPUkRFUiBCWSBjLmNyZWF0ZWRBdCBERVNDYCxcbiAgICAgIFt1c2VySWRdXG4gICAgKVxuXG4gICAgcmV0dXJuIGNhcnRJdGVtcy5tYXAoKGl0ZW06IGFueSkgPT4gKHtcbiAgICAgIGNhcnRJZDogaXRlbS5pZCxcbiAgICAgIHF1YW50aXR5OiBpdGVtLnF1YW50aXR5LFxuICAgICAgcHJvZHVjdDoge1xuICAgICAgICBpZDogaXRlbS5wcm9kdWN0SWQsXG4gICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgcHJpY2U6IGl0ZW0ucHJpY2UsXG4gICAgICAgIHBob3RvVXJsOiBpdGVtLnBob3RvVXJsLFxuICAgICAgICBjYXRlZ29yeUlkOiBpdGVtLmNhdGVnb3J5SWQsXG4gICAgICAgIGNvbmRpdGlvbjogaXRlbS5jb25kaXRpb24sXG4gICAgICB9LFxuICAgIH0pKVxuICB9IGZpbmFsbHkge1xuICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUNhcnRRdWFudGl0eShjYXJ0SWQ6IHN0cmluZywgcXVhbnRpdHk6IG51bWJlcikge1xuICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKClcbiAgdHJ5IHtcbiAgICBpZiAocXVhbnRpdHkgPD0gMCkge1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeSgnREVMRVRFIEZST00gY2FydHMgV0hFUkUgaWQgPSA/JywgW2NhcnRJZF0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoJ1VQREFURSBjYXJ0cyBTRVQgcXVhbnRpdHkgPSA/IFdIRVJFIGlkID0gPycsIFtxdWFudGl0eSwgY2FydElkXSlcbiAgICB9XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gIH0gZmluYWxseSB7XG4gICAgY29ubmVjdGlvbi5yZWxlYXNlKClcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVtb3ZlRnJvbUNhcnQoY2FydElkOiBzdHJpbmcpIHtcbiAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpXG4gIHRyeSB7XG4gICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeSgnREVMRVRFIEZST00gY2FydHMgV0hFUkUgaWQgPSA/JywgW2NhcnRJZF0pXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gIH0gZmluYWxseSB7XG4gICAgY29ubmVjdGlvbi5yZWxlYXNlKClcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYXJDYXJ0KHVzZXJJZDogc3RyaW5nKSB7XG4gIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKVxuICB0cnkge1xuICAgIGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoJ0RFTEVURSBGUk9NIGNhcnRzIFdIRVJFIHVzZXJJZCA9ID8nLCBbdXNlcklkXSlcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgfSBmaW5hbGx5IHtcbiAgICBjb25uZWN0aW9uLnJlbGVhc2UoKVxuICB9XG59XG5cbi8vIE9yZGVyIGZ1bmN0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU9yZGVyKHVzZXJJZDogc3RyaW5nLCBjYXJ0SXRlbXM6IGFueVtdLCBzaGlwcGluZ0RhdGE6IGFueSkge1xuICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKClcbiAgdHJ5IHtcbiAgICBjb25zdCBvcmRlcklkID0gcmFuZG9tVVVJRCgpXG4gICAgY29uc3QgdG90YWxBbW91bnQgPSBjYXJ0SXRlbXMucmVkdWNlKChzdW0sIGl0ZW0pID0+IHN1bSArIChpdGVtLnByb2R1Y3QucHJpY2UgKiBpdGVtLnF1YW50aXR5KSwgMClcblxuICAgIGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoXG4gICAgICBgSU5TRVJUIElOVE8gb3JkZXJzIFxuICAgICAgICAoaWQsIHVzZXJJZCwgdG90YWxBbW91bnQsIHNoaXBwaW5nQWRkcmVzcywgc2hpcHBpbmdDaXR5LCBzaGlwcGluZ1Bvc3RhbCwgXG4gICAgICAgICBzaGlwcGluZ1Bob25lLCBwYXltZW50U3RhdHVzLCBvcmRlclN0YXR1cykgXG4gICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KWAsXG4gICAgICBbXG4gICAgICAgIG9yZGVySWQsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgdG90YWxBbW91bnQsXG4gICAgICAgIHNoaXBwaW5nRGF0YS5hZGRyZXNzLFxuICAgICAgICBzaGlwcGluZ0RhdGEuY2l0eSxcbiAgICAgICAgc2hpcHBpbmdEYXRhLnBvc3RhbCxcbiAgICAgICAgc2hpcHBpbmdEYXRhLnBob25lLFxuICAgICAgICAnUEVORElORycsXG4gICAgICAgICdQRU5ESU5HJyxcbiAgICAgIF1cbiAgICApXG5cbiAgICAvLyBJbnNlcnQgb3JkZXIgaXRlbXNcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgY2FydEl0ZW1zKSB7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFxuICAgICAgICBgSU5TRVJUIElOVE8gb3JkZXJfaXRlbXMgKGlkLCBvcmRlcklkLCBwcm9kdWN0SWQsIHF1YW50aXR5LCBwcmljZSlcbiAgICAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPylgLFxuICAgICAgICBbXG4gICAgICAgICAgcmFuZG9tVVVJRCgpLFxuICAgICAgICAgIG9yZGVySWQsXG4gICAgICAgICAgaXRlbS5wcm9kdWN0LmlkLFxuICAgICAgICAgIGl0ZW0ucXVhbnRpdHksXG4gICAgICAgICAgaXRlbS5wcm9kdWN0LnByaWNlLFxuICAgICAgICBdXG4gICAgICApXG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgY2FydFxuICAgIGF3YWl0IGNsZWFyQ2FydCh1c2VySWQpXG5cbiAgICByZXR1cm4geyBvcmRlcklkLCB0b3RhbEFtb3VudCB9XG4gIH0gZmluYWxseSB7XG4gICAgY29ubmVjdGlvbi5yZWxlYXNlKClcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3JkZXJzKHVzZXJJZDogc3RyaW5nKSB7XG4gIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKVxuICB0cnkge1xuICAgIGNvbnN0IFtvcmRlcnNdOiBhbnkgPSBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFxuICAgICAgYFNFTEVDVCAqIEZST00gb3JkZXJzIFdIRVJFIHVzZXJJZCA9ID8gT1JERVIgQlkgY3JlYXRlZEF0IERFU0NgLFxuICAgICAgW3VzZXJJZF1cbiAgICApXG5cbiAgICBjb25zdCBvcmRlcnNXaXRoSXRlbXMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgIG9yZGVycy5tYXAoYXN5bmMgKG9yZGVyOiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgW2l0ZW1zXTogYW55ID0gYXdhaXQgY29ubmVjdGlvbi5xdWVyeShcbiAgICAgICAgICBgU0VMRUNUIG9pLiosIHAubmFtZSwgcC5waG90b1VybCBcbiAgICAgICAgICAgRlJPTSBvcmRlcl9pdGVtcyBvaVxuICAgICAgICAgICBKT0lOIHByb2R1Y3RzIHAgT04gb2kucHJvZHVjdElkID0gcC5pZFxuICAgICAgICAgICBXSEVSRSBvaS5vcmRlcklkID0gP2AsXG4gICAgICAgICAgW29yZGVyLmlkXVxuICAgICAgICApXG4gICAgICAgIHJldHVybiB7IC4uLm9yZGVyLCBpdGVtcyB9XG4gICAgICB9KVxuICAgIClcblxuICAgIHJldHVybiBvcmRlcnNXaXRoSXRlbXNcbiAgfSBmaW5hbGx5IHtcbiAgICBjb25uZWN0aW9uLnJlbGVhc2UoKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPcmRlckJ5SWQob3JkZXJJZDogc3RyaW5nKSB7XG4gIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKVxuICB0cnkge1xuICAgIGNvbnN0IFtvcmRlcnNdOiBhbnkgPSBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFxuICAgICAgYFNFTEVDVCBvLiosIHUuaWQgYXMgdXNlcklkLCB1Lm5hbWUgYXMgdXNlck5hbWUsIHUuZW1haWwgYXMgdXNlckVtYWlsXG4gICAgICAgRlJPTSBvcmRlcnMgb1xuICAgICAgIExFRlQgSk9JTiB1c2VycyB1IE9OIG8udXNlcklkID0gdS5pZFxuICAgICAgIFdIRVJFIG8uaWQgPSA/YCxcbiAgICAgIFtvcmRlcklkXVxuICAgIClcblxuICAgIGlmIChvcmRlcnMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbFxuXG4gICAgY29uc3Qgb3JkZXIgPSBvcmRlcnNbMF1cbiAgICBjb25zdCBbaXRlbXNdOiBhbnkgPSBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFxuICAgICAgYFNFTEVDVCBvaS4qLCBwLmlkIGFzIHByb2R1Y3RJZCwgcC5uYW1lLCBwLnByaWNlLCBwLnBob3RvVXJsIFxuICAgICAgIEZST00gb3JkZXJfaXRlbXMgb2lcbiAgICAgICBKT0lOIHByb2R1Y3RzIHAgT04gb2kucHJvZHVjdElkID0gcC5pZFxuICAgICAgIFdIRVJFIG9pLm9yZGVySWQgPSA/YCxcbiAgICAgIFtvcmRlcklkXVxuICAgIClcblxuICAgIHJldHVybiB7XG4gICAgICAuLi5vcmRlcixcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IG9yZGVyLnVzZXJJZCxcbiAgICAgICAgbmFtZTogb3JkZXIudXNlck5hbWUsXG4gICAgICAgIGVtYWlsOiBvcmRlci51c2VyRW1haWxcbiAgICAgIH0sXG4gICAgICBpdGVtczogaXRlbXMubWFwKChpdGVtOiBhbnkpID0+ICh7XG4gICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICBxdWFudGl0eTogaXRlbS5xdWFudGl0eSxcbiAgICAgICAgcHJpY2U6IGl0ZW0ucHJpY2UsXG4gICAgICAgIHByb2R1Y3Q6IHtcbiAgICAgICAgICBpZDogaXRlbS5wcm9kdWN0SWQsXG4gICAgICAgICAgbmFtZTogaXRlbS5uYW1lXG4gICAgICAgIH1cbiAgICAgIH0pKVxuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICBjb25uZWN0aW9uLnJlbGVhc2UoKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVPcmRlclBheW1lbnQob3JkZXJJZDogc3RyaW5nLCBwYXltZW50SWQ6IHN0cmluZywgcGF5bWVudFVybDogc3RyaW5nKSB7XG4gIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKVxuICB0cnkge1xuICAgIGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoXG4gICAgICAnVVBEQVRFIG9yZGVycyBTRVQgcGF5bWVudElkID0gPywgcGF5bWVudFVybCA9ID8sIHVwZGF0ZWRBdCA9IE5PVygpIFdIRVJFIGlkID0gPycsXG4gICAgICBbcGF5bWVudElkLCBwYXltZW50VXJsLCBvcmRlcklkXVxuICAgIClcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgfSBmaW5hbGx5IHtcbiAgICBjb25uZWN0aW9uLnJlbGVhc2UoKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVPcmRlclN0YXR1cyhvcmRlcklkOiBzdHJpbmcsIHN0YXR1czogc3RyaW5nLCBwYXltZW50U3RhdHVzPzogc3RyaW5nKSB7XG4gIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKVxuICB0cnkge1xuICAgIGNvbnN0IHVwZGF0ZXM6IHN0cmluZ1tdID0gWydvcmRlclN0YXR1cyA9ID8nXVxuICAgIGNvbnN0IHZhbHVlczogYW55W10gPSBbc3RhdHVzXVxuXG4gICAgaWYgKHBheW1lbnRTdGF0dXMpIHtcbiAgICAgIHVwZGF0ZXMucHVzaCgncGF5bWVudFN0YXR1cyA9ID8nKVxuICAgICAgdmFsdWVzLnB1c2gocGF5bWVudFN0YXR1cylcbiAgICB9XG5cbiAgICB2YWx1ZXMucHVzaChvcmRlcklkKVxuXG4gICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShcbiAgICAgIGBVUERBVEUgb3JkZXJzIFNFVCAke3VwZGF0ZXMuam9pbignLCAnKX0sIHVwZGF0ZWRBdCA9IE5PVygpIFdIRVJFIGlkID0gP2AsXG4gICAgICB2YWx1ZXNcbiAgICApXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gIH0gZmluYWxseSB7XG4gICAgY29ubmVjdGlvbi5yZWxlYXNlKClcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsT3JkZXJzKHBhZ2U6IG51bWJlciA9IDEsIGxpbWl0OiBudW1iZXIgPSAxMCwgc3RhdHVzOiBzdHJpbmcgPSAnQUxMJykge1xuICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKClcbiAgdHJ5IHtcbiAgICBjb25zdCBvZmZzZXQgPSAocGFnZSAtIDEpICogbGltaXRcbiAgICBsZXQgd2hlcmVDbGF1c2UgPSAnJ1xuICAgIGNvbnN0IHBhcmFtczogYW55W10gPSBbXVxuXG4gICAgaWYgKHN0YXR1cyAhPT0gJ0FMTCcpIHtcbiAgICAgIHdoZXJlQ2xhdXNlID0gJ1dIRVJFIG8ub3JkZXJTdGF0dXMgPSA/J1xuICAgICAgcGFyYW1zLnB1c2goc3RhdHVzKVxuICAgIH1cblxuICAgIC8vIEdldCB0b3RhbCBjb3VudFxuICAgIGNvbnN0IFtjb3VudFJlc3VsdF06IGFueSA9IGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoXG4gICAgICBgU0VMRUNUIENPVU5UKCopIGFzIHRvdGFsIEZST00gb3JkZXJzIG8gJHt3aGVyZUNsYXVzZX1gLFxuICAgICAgcGFyYW1zXG4gICAgKVxuICAgIGNvbnN0IHRvdGFsT3JkZXJzID0gY291bnRSZXN1bHRbMF0/LnRvdGFsIHx8IDBcbiAgICBjb25zdCB0b3RhbFBhZ2VzID0gTWF0aC5jZWlsKHRvdGFsT3JkZXJzIC8gbGltaXQpXG5cbiAgICAvLyBHZXQgcGFnaW5hdGVkIG9yZGVycyB3aXRoIHVzZXIgaW5mb1xuICAgIGNvbnN0IFtvcmRlcnNdOiBhbnkgPSBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFxuICAgICAgYFNFTEVDVCBvLiosIHUubmFtZSBhcyB1c2VyX25hbWUsIHUuZW1haWwgYXMgdXNlcl9lbWFpbFxuICAgICAgIEZST00gb3JkZXJzIG9cbiAgICAgICBMRUZUIEpPSU4gdXNlcnMgdSBPTiBvLnVzZXJJZCA9IHUuaWRcbiAgICAgICAke3doZXJlQ2xhdXNlfVxuICAgICAgIE9SREVSIEJZIG8uY3JlYXRlZEF0IERFU0NcbiAgICAgICBMSU1JVCA/IE9GRlNFVCA/YCxcbiAgICAgIFsuLi5wYXJhbXMsIGxpbWl0LCBvZmZzZXRdXG4gICAgKVxuXG4gICAgLy8gRm9ybWF0IHJlc3BvbnNlXG4gICAgY29uc3QgZm9ybWF0dGVkT3JkZXJzID0gb3JkZXJzLm1hcCgob3JkZXI6IGFueSkgPT4gKHtcbiAgICAgIGlkOiBvcmRlci5pZCxcbiAgICAgIHRvdGFsQW1vdW50OiBvcmRlci50b3RhbEFtb3VudCxcbiAgICAgIG9yZGVyU3RhdHVzOiBvcmRlci5vcmRlclN0YXR1cyxcbiAgICAgIHBheW1lbnRTdGF0dXM6IG9yZGVyLnBheW1lbnRTdGF0dXMsXG4gICAgICBzaGlwcGluZ0NpdHk6IG9yZGVyLnNoaXBwaW5nQ2l0eSxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgbmFtZTogb3JkZXIudXNlcl9uYW1lLFxuICAgICAgICBlbWFpbDogb3JkZXIudXNlcl9lbWFpbFxuICAgICAgfSxcbiAgICAgIGNyZWF0ZWRBdDogb3JkZXIuY3JlYXRlZEF0LFxuICAgICAgaXRlbXM6IFtdIC8vIFdpbGwgYmUgcG9wdWxhdGVkIGlmIG5lZWRlZFxuICAgIH0pKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIG9yZGVyczogZm9ybWF0dGVkT3JkZXJzLFxuICAgICAgdG90YWxQYWdlcyxcbiAgICAgIGN1cnJlbnRQYWdlOiBwYWdlLFxuICAgICAgdG90YWxPcmRlcnNcbiAgICB9XG4gIH0gZmluYWxseSB7XG4gICAgY29ubmVjdGlvbi5yZWxlYXNlKClcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlT3JkZXJEZXRhaWxzKGlkOiBzdHJpbmcsIGRhdGE6IGFueSkge1xuICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKClcbiAgdHJ5IHtcbiAgICBjb25zdCB1cGRhdGVGaWVsZHM6IHN0cmluZ1tdID0gW11cbiAgICBjb25zdCB2YWx1ZXM6IGFueVtdID0gW11cblxuICAgIGlmIChkYXRhLm9yZGVyU3RhdHVzKSB7XG4gICAgICB1cGRhdGVGaWVsZHMucHVzaCgnb3JkZXJTdGF0dXMgPSA/JylcbiAgICAgIHZhbHVlcy5wdXNoKGRhdGEub3JkZXJTdGF0dXMpXG4gICAgfVxuICAgIGlmIChkYXRhLnBheW1lbnRTdGF0dXMpIHtcbiAgICAgIHVwZGF0ZUZpZWxkcy5wdXNoKCdwYXltZW50U3RhdHVzID0gPycpXG4gICAgICB2YWx1ZXMucHVzaChkYXRhLnBheW1lbnRTdGF0dXMpXG4gICAgfVxuICAgIGlmIChkYXRhLm5vdGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHVwZGF0ZUZpZWxkcy5wdXNoKCdub3RlcyA9ID8nKVxuICAgICAgdmFsdWVzLnB1c2goZGF0YS5ub3RlcylcbiAgICB9XG4gICAgaWYgKGRhdGEucHJvY2Vzc2VkQnkpIHtcbiAgICAgIHVwZGF0ZUZpZWxkcy5wdXNoKCdwcm9jZXNzZWRCeSA9ID8nKVxuICAgICAgdmFsdWVzLnB1c2goZGF0YS5wcm9jZXNzZWRCeSlcbiAgICAgIHVwZGF0ZUZpZWxkcy5wdXNoKCdwcm9jZXNzZWRBdCA9IE5PVygpJylcbiAgICB9XG5cbiAgICAvLyBBbHdheXMgdXBkYXRlIHRpbWVzdGFtcFxuICAgIHVwZGF0ZUZpZWxkcy5wdXNoKCd1cGRhdGVkQXQgPSBOT1coKScpXG5cbiAgICB2YWx1ZXMucHVzaChpZClcblxuICAgIGlmICh1cGRhdGVGaWVsZHMubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgcXVlcnkgPSBgVVBEQVRFIG9yZGVycyBTRVQgJHt1cGRhdGVGaWVsZHMuam9pbignLCAnKX0gV0hFUkUgaWQgPSA/YFxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShxdWVyeSwgdmFsdWVzKVxuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICB9IGZpbmFsbHkge1xuICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZU9yZGVyKGlkOiBzdHJpbmcpIHtcbiAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpXG4gIHRyeSB7XG4gICAgLy8gRGVsZXRlIG9yZGVyIGl0ZW1zIGZpcnN0IChmb3JlaWduIGtleSBjb25zdHJhaW50KVxuICAgIGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoJ0RFTEVURSBGUk9NIG9yZGVyX2l0ZW1zIFdIRVJFIG9yZGVySWQgPSA/JywgW2lkXSlcblxuICAgIC8vIERlbGV0ZSBvcmRlclxuICAgIGNvbnN0IFtyZXN1bHRdOiBhbnkgPSBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KCdERUxFVEUgRlJPTSBvcmRlcnMgV0hFUkUgaWQgPSA/JywgW2lkXSlcblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHJlc3VsdC5hZmZlY3RlZFJvd3MgPiAwIH1cbiAgfSBmaW5hbGx5IHtcbiAgICBjb25uZWN0aW9uLnJlbGVhc2UoKVxuICB9XG59XG4iXSwibmFtZXMiOlsibXlzcWwiLCJyYW5kb21VVUlEIiwiYmNyeXB0IiwicG9vbENvbmZpZyIsIndhaXRGb3JDb25uZWN0aW9ucyIsImNvbm5lY3Rpb25MaW1pdCIsInF1ZXVlTGltaXQiLCJlbmFibGVLZWVwQWxpdmUiLCJwcm9jZXNzIiwiZW52IiwiREFUQUJBU0VfVVJMIiwic3NsIiwibWluVmVyc2lvbiIsInJlamVjdFVuYXV0aG9yaXplZCIsInVybFN0ciIsInVybCIsIlVSTCIsImhvc3QiLCJob3N0bmFtZSIsInVzZXIiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiZGF0YWJhc2UiLCJwYXRobmFtZSIsInJlcGxhY2UiLCJwb3J0IiwicGFyc2VJbnQiLCJwYXJzZUVycm9yIiwibm9Qcm90byIsImxhc3RBdCIsImxhc3RJbmRleE9mIiwiY3JlZHMiLCJzdWJzdHJpbmciLCJhZGRyZXNzIiwiZmlyc3RDb2xvbiIsImluZGV4T2YiLCJzbGFzaElkeCIsImhvc3RQb3J0Iiwic3BsaXQiLCJjb2xvbklkeCIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJEQl9IT1NUIiwiREJfVVNFUiIsIkRCX1BBU1NXT1JEIiwiREJfTkFNRSIsIkRCX1BPUlQiLCJwb29sIiwiY3JlYXRlUG9vbCIsImlzSW5pdGlhbGl6ZWQiLCJpbml0UHJvbWlzZSIsImluaXRpYWxpemF0aW9uQXR0ZW1wdGVkIiwiaW5pdGlhbGl6ZURhdGFiYXNlIiwiY29ubmVjdGlvbiIsImdldENvbm5lY3Rpb24iLCJxdWVyeSIsIm1lc3NhZ2UiLCJpbmNsdWRlcyIsIndhcm4iLCJyb3dzIiwiZXhpc3RpbmciLCJtYXAiLCJyIiwiQ09MVU1OX05BTUUiLCJlMiIsImNhdGVnb3JpZXMiLCJjb3VudCIsImxvZyIsInJlbGVhc2UiLCJjcmVhdGVVc2VyIiwibmFtZSIsImVtYWlsIiwicm9sZSIsIkVycm9yIiwiaGFzaGVkUGFzc3dvcmQiLCJzdGFydHNXaXRoIiwiaGFzaCIsImlkIiwiY29kZSIsImdldFVzZXJCeUVtYWlsIiwibGVuZ3RoIiwiZ2V0VXNlckJ5SWQiLCJnZXRBbGxVc2VycyIsInVwZGF0ZVVzZXIiLCJkYXRhIiwiZmllbGRzIiwiT2JqZWN0Iiwia2V5cyIsImtleSIsImpvaW4iLCJ2YWx1ZXMiLCJkZWxldGVVc2VyIiwic3VjY2VzcyIsImNyZWF0ZVByb2R1Y3QiLCJwcm9kdWN0RGF0YSIsImNhdGVnb3J5SWQiLCJkZXNjcmlwdGlvbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJzaXplcyIsImNvbmRpdGlvbiIsInByaWNlIiwic3RvY2siLCJwaG90b1VybHMiLCJ1c2VySWQiLCJpIiwiZ2V0QWxsUHJvZHVjdHMiLCJwcm9kdWN0cyIsInJvdyIsInBhcnNlIiwicGhvdG9VcmwiLCJjcmVhdGVkQXQiLCJyYXRpbmciLCJzb2xkIiwicHJvZHVjdElkcyIsInAiLCJ2YWxpZFByb2R1Y3RJZHMiLCJmaWx0ZXIiLCJ0ZXN0IiwicGhvdG9zQnlQcm9kdWN0IiwicGxhY2Vob2xkZXJzIiwicGhvdG9zUm93cyIsInByIiwicHJvZHVjdElkIiwicHVzaCIsImdhbGxlcnkiLCJnZXRQcm9kdWN0c0J5VXNlcklkIiwiZ2V0UHJvZHVjdEJ5SWQiLCJwaG90b1Jvd3MiLCJnYWxsZXJ5VXJscyIsInVwZGF0ZVByb2R1Y3QiLCJ1cGRhdGVGaWVsZHMiLCJ1bmRlZmluZWQiLCJwcmltYXJ5IiwiaW5zZXJ0cyIsImZsYXRWYWx1ZXMiLCJmbGF0IiwiZGVsZXRlUHJvZHVjdCIsImdldENhdGVnb3JpZXMiLCJBcnJheSIsImlzQXJyYXkiLCJ1cGRhdGVVc2VyUGFzc3dvcmRCeUVtYWlsIiwiYWRkVG9DYXJ0IiwicXVhbnRpdHkiLCJnZXRDYXJ0IiwiY2FydEl0ZW1zIiwiaXRlbSIsImNhcnRJZCIsInByb2R1Y3QiLCJ1cGRhdGVDYXJ0UXVhbnRpdHkiLCJyZW1vdmVGcm9tQ2FydCIsImNsZWFyQ2FydCIsImNyZWF0ZU9yZGVyIiwic2hpcHBpbmdEYXRhIiwib3JkZXJJZCIsInRvdGFsQW1vdW50IiwicmVkdWNlIiwic3VtIiwiY2l0eSIsInBvc3RhbCIsInBob25lIiwiZ2V0T3JkZXJzIiwib3JkZXJzIiwib3JkZXJzV2l0aEl0ZW1zIiwiUHJvbWlzZSIsImFsbCIsIm9yZGVyIiwiaXRlbXMiLCJnZXRPcmRlckJ5SWQiLCJ1c2VyTmFtZSIsInVzZXJFbWFpbCIsInVwZGF0ZU9yZGVyUGF5bWVudCIsInBheW1lbnRJZCIsInBheW1lbnRVcmwiLCJ1cGRhdGVPcmRlclN0YXR1cyIsInN0YXR1cyIsInBheW1lbnRTdGF0dXMiLCJ1cGRhdGVzIiwiZ2V0QWxsT3JkZXJzIiwicGFnZSIsImxpbWl0Iiwib2Zmc2V0Iiwid2hlcmVDbGF1c2UiLCJwYXJhbXMiLCJjb3VudFJlc3VsdCIsInRvdGFsT3JkZXJzIiwidG90YWwiLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJmb3JtYXR0ZWRPcmRlcnMiLCJvcmRlclN0YXR1cyIsInNoaXBwaW5nQ2l0eSIsInVzZXJfbmFtZSIsInVzZXJfZW1haWwiLCJjdXJyZW50UGFnZSIsInVwZGF0ZU9yZGVyRGV0YWlscyIsIm5vdGVzIiwicHJvY2Vzc2VkQnkiLCJkZWxldGVPcmRlciIsInJlc3VsdCIsImFmZmVjdGVkUm93cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!****************************************************!*\
  !*** ./node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \****************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.ts&appDir=C%3A%5Cxampp%5Chtdocs%5Cgraky%20store%20web%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cxampp%5Chtdocs%5Cgraky%20store%20web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.ts&appDir=C%3A%5Cxampp%5Chtdocs%5Cgraky%20store%20web%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cxampp%5Chtdocs%5Cgraky%20store%20web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var C_xampp_htdocs_graky_store_web_app_api_auth_nextauth_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./app/api/auth/[...nextauth]/route.ts */ \"(rsc)/./app/api/auth/[...nextauth]/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/[...nextauth]/route\",\n        pathname: \"/api/auth/[...nextauth]\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/[...nextauth]/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"C:\\\\xampp\\\\htdocs\\\\graky store web\\\\app\\\\api\\\\auth\\\\[...nextauth]\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_xampp_htdocs_graky_store_web_app_api_auth_nextauth_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/auth/[...nextauth]/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGJTVCLi4ubmV4dGF1dGglNUQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkYlNUIuLi5uZXh0YXV0aCU1RCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkYlNUIuLi5uZXh0YXV0aCU1RCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDeGFtcHAlNUNodGRvY3MlNUNncmFreSUyMHN0b3JlJTIwd2ViJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDeGFtcHAlNUNodGRvY3MlNUNncmFreSUyMHN0b3JlJTIwd2ViJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PXN0YW5kYWxvbmUmcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCZpc0dsb2JhbE5vdEZvdW5kRW5hYmxlZD0hIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ2Q7QUFDUztBQUNPO0FBQ0s7QUFDbUM7QUFDakQ7QUFDTztBQUNmO0FBQ3NDO0FBQ3pCO0FBQ007QUFDQztBQUNoQjtBQUNzQztBQUN4RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhLE9BQW9DLElBQUksQ0FBRTtBQUN2RCx3QkFBd0IsTUFBdUM7QUFD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QTZDLDBGQUFxQjtBQUNsRTtBQUNBLGtCQUFrQiw2RUFBWTtBQUM5QjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDViw2RUFBNkUsZ0ZBQWM7QUFDM0YsaUNBQWlDLFFBQVEsRUFBRSxRQUFRO0FBQ25ELDBCQUEwQix1RUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLE1BQU07QUFDTiw2QkFBNkIsNkZBQWU7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsMkZBQW1CO0FBQ3JEO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDZFQUFZO0FBQzFCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCB7IGdldFJlcXVlc3RNZXRhIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVxdWVzdC1tZXRhXCI7XG5pbXBvcnQgeyBnZXRUcmFjZXIsIFNwYW5LaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL3RyYWNlclwiO1xuaW1wb3J0IHsgbm9ybWFsaXplQXBwUGF0aCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvYXBwLXBhdGhzXCI7XG5pbXBvcnQgeyBOb2RlTmV4dFJlcXVlc3QsIE5vZGVOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9iYXNlLWh0dHAvbm9kZVwiO1xuaW1wb3J0IHsgTmV4dFJlcXVlc3RBZGFwdGVyLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3NwZWMtZXh0ZW5zaW9uL2FkYXB0ZXJzL25leHQtcmVxdWVzdFwiO1xuaW1wb3J0IHsgQmFzZVNlcnZlclNwYW4gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBnZXRSZXZhbGlkYXRlUmVhc29uIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvaW5zdHJ1bWVudGF0aW9uL3V0aWxzXCI7XG5pbXBvcnQgeyBzZW5kUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9zZW5kLXJlc3BvbnNlXCI7XG5pbXBvcnQgeyBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMsIHRvTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvdXRpbHNcIjtcbmltcG9ydCB7IGdldENhY2hlQ29udHJvbEhlYWRlciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9jYWNoZS1jb250cm9sXCI7XG5pbXBvcnQgeyBJTkZJTklURV9DQUNIRSwgTkVYVF9DQUNIRV9UQUdTX0hFQURFUiB9IGZyb20gXCJuZXh0L2Rpc3QvbGliL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgTm9GYWxsYmFja0Vycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL25vLWZhbGxiYWNrLWVycm9yLmV4dGVybmFsXCI7XG5pbXBvcnQgeyBDYWNoZWRSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXNwb25zZS1jYWNoZVwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXHhhbXBwXFxcXGh0ZG9jc1xcXFxncmFreSBzdG9yZSB3ZWJcXFxcYXBwXFxcXGFwaVxcXFxhdXRoXFxcXFsuLi5uZXh0YXV0aF1cXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwic3RhbmRhbG9uZVwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdXRoL1suLi5uZXh0YXV0aF1cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZVwiXG4gICAgfSxcbiAgICBkaXN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfRElTVF9ESVIgfHwgJycsXG4gICAgcmVsYXRpdmVQcm9qZWN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfUFJPSkVDVF9ESVIgfHwgJycsXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFx4YW1wcFxcXFxodGRvY3NcXFxcZ3Jha3kgc3RvcmUgd2ViXFxcXGFwcFxcXFxhcGlcXFxcYXV0aFxcXFxbLi4ubmV4dGF1dGhdXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMsIGN0eCkge1xuICAgIHZhciBfbmV4dENvbmZpZ19leHBlcmltZW50YWw7XG4gICAgbGV0IHNyY1BhZ2UgPSBcIi9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdL3JvdXRlXCI7XG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHRvIHByb2Nlc3MgZHluYW1pYyByb3V0ZXMgcHJvcGVybHlcbiAgICAvLyBUT0RPOiBmaXggdHVyYm9wYWNrIHByb3ZpZGluZyBkaWZmZXJpbmcgdmFsdWUgZnJvbSB3ZWJwYWNrXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xuICAgICAgICBzcmNQYWdlID0gc3JjUGFnZS5yZXBsYWNlKC9cXC9pbmRleCQvLCAnJykgfHwgJy8nO1xuICAgIH0gZWxzZSBpZiAoc3JjUGFnZSA9PT0gJy9pbmRleCcpIHtcbiAgICAgICAgLy8gd2UgYWx3YXlzIG5vcm1hbGl6ZSAvaW5kZXggc3BlY2lmaWNhbGx5XG4gICAgICAgIHNyY1BhZ2UgPSAnLyc7XG4gICAgfVxuICAgIGNvbnN0IG11bHRpWm9uZURyYWZ0TW9kZSA9IHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREU7XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZSxcbiAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB7IGJ1aWxkSWQsIHBhcmFtcywgbmV4dENvbmZpZywgaXNEcmFmdE1vZGUsIHByZXJlbmRlck1hbmlmZXN0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0LCBpc09uRGVtYW5kUmV2YWxpZGF0ZSwgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsIHJlc29sdmVkUGF0aG5hbWUgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgY29uc3Qgbm9ybWFsaXplZFNyY1BhZ2UgPSBub3JtYWxpemVBcHBQYXRoKHNyY1BhZ2UpO1xuICAgIGxldCBpc0lzciA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0gfHwgcHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICBpZiAoaXNJc3IgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNvbnN0IGlzUHJlcmVuZGVyZWQgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgICAgIGNvbnN0IHByZXJlbmRlckluZm8gPSBwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXTtcbiAgICAgICAgaWYgKHByZXJlbmRlckluZm8pIHtcbiAgICAgICAgICAgIGlmIChwcmVyZW5kZXJJbmZvLmZhbGxiYWNrID09PSBmYWxzZSAmJiAhaXNQcmVyZW5kZXJlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb0ZhbGxiYWNrRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgY2FjaGVLZXkgPSBudWxsO1xuICAgIGlmIChpc0lzciAmJiAhcm91dGVNb2R1bGUuaXNEZXYgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNhY2hlS2V5ID0gcmVzb2x2ZWRQYXRobmFtZTtcbiAgICAgICAgLy8gZW5zdXJlIC9pbmRleCBhbmQgLyBpcyBub3JtYWxpemVkIHRvIG9uZSBrZXlcbiAgICAgICAgY2FjaGVLZXkgPSBjYWNoZUtleSA9PT0gJy9pbmRleCcgPyAnLycgOiBjYWNoZUtleTtcbiAgICB9XG4gICAgY29uc3Qgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UgPSAvLyBJZiB3ZSdyZSBpbiBkZXZlbG9wbWVudCwgd2UgYWx3YXlzIHN1cHBvcnQgZHluYW1pYyBIVE1MXG4gICAgcm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgLy8gSWYgdGhpcyBpcyBub3QgU1NHIG9yIGRvZXMgbm90IGhhdmUgc3RhdGljIHBhdGhzLCB0aGVuIGl0IHN1cHBvcnRzXG4gICAgLy8gZHluYW1pYyBIVE1MLlxuICAgICFpc0lzcjtcbiAgICAvLyBUaGlzIGlzIGEgcmV2YWxpZGF0aW9uIHJlcXVlc3QgaWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljXG4gICAgLy8gcGFnZSBhbmQgaXQgaXMgbm90IGJlaW5nIHJlc3VtZWQgZnJvbSBhIHBvc3Rwb25lZCByZW5kZXIgYW5kXG4gICAgLy8gaXQgaXMgbm90IGEgZHluYW1pYyBSU0MgcmVxdWVzdCB0aGVuIGl0IGlzIGEgcmV2YWxpZGF0aW9uXG4gICAgLy8gcmVxdWVzdC5cbiAgICBjb25zdCBpc1JldmFsaWRhdGUgPSBpc0lzciAmJiAhc3VwcG9ydHNEeW5hbWljUmVzcG9uc2U7XG4gICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbDoge1xuICAgICAgICAgICAgICAgIGNhY2hlQ29tcG9uZW50czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jYWNoZUNvbXBvbmVudHMpLFxuICAgICAgICAgICAgICAgIGF1dGhJbnRlcnJ1cHRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmF1dGhJbnRlcnJ1cHRzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlLFxuICAgICAgICAgICAgaW5jcmVtZW50YWxDYWNoZTogZ2V0UmVxdWVzdE1ldGEocmVxLCAnaW5jcmVtZW50YWxDYWNoZScpLFxuICAgICAgICAgICAgY2FjaGVMaWZlUHJvZmlsZXM6IChfbmV4dENvbmZpZ19leHBlcmltZW50YWwgPSBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbC5jYWNoZUxpZmUsXG4gICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWwsXG4gICAgICAgICAgICBvbkNsb3NlOiAoY2IpPT57XG4gICAgICAgICAgICAgICAgcmVzLm9uKCdjbG9zZScsIGNiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkFmdGVyVGFza0Vycm9yOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBvbkluc3RydW1lbnRhdGlvblJlcXVlc3RFcnJvcjogKGVycm9yLCBfcmVxdWVzdCwgZXJyb3JDb250ZXh0KT0+cm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnJvciwgZXJyb3JDb250ZXh0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KVxuICAgICAgICB9LFxuICAgICAgICBzaGFyZWRDb250ZXh0OiB7XG4gICAgICAgICAgICBidWlsZElkXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG5vZGVOZXh0UmVxID0gbmV3IE5vZGVOZXh0UmVxdWVzdChyZXEpO1xuICAgIGNvbnN0IG5vZGVOZXh0UmVzID0gbmV3IE5vZGVOZXh0UmVzcG9uc2UocmVzKTtcbiAgICBjb25zdCBuZXh0UmVxID0gTmV4dFJlcXVlc3RBZGFwdGVyLmZyb21Ob2RlTmV4dFJlcXVlc3Qobm9kZU5leHRSZXEsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UocmVzKSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW52b2tlUm91dGVNb2R1bGUgPSBhc3luYyAoc3Bhbik9PntcbiAgICAgICAgICAgIHJldHVybiByb3V0ZU1vZHVsZS5oYW5kbGUobmV4dFJlcSwgY29udGV4dCkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgIGlmICghc3BhbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICduZXh0LnJzYyc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdFNwYW5BdHRyaWJ1dGVzID0gdHJhY2VyLmdldFJvb3RTcGFuQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgIC8vIFdlIHdlcmUgdW5hYmxlIHRvIGdldCBhdHRyaWJ1dGVzLCBwcm9iYWJseSBPVEVMIGlzIG5vdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgaWYgKCFyb290U3BhbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKSAhPT0gQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcm9vdCBzcGFuIHR5cGUgJyR7cm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKX0nLiBQbGVhc2UgcmVwb3J0IHRoaXMgTmV4dC5qcyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanNgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQucm91dGUnKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke21ldGhvZH0gJHtyb3V0ZX1gO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5zcGFuX25hbWUnOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKGAke21ldGhvZH0gJHtyZXEudXJsfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBoYW5kbGVSZXNwb25zZSA9IGFzeW5jIChjdXJyZW50U3Bhbik9PntcbiAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlR2VuZXJhdG9yID0gYXN5bmMgKHsgcHJldmlvdXNDYWNoZUVudHJ5IH0pPT57XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzT25EZW1hbmRSZXZhbGlkYXRlICYmIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkICYmICFwcmV2aW91c0NhY2hlRW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24tZGVtYW5kIHJldmFsaWRhdGUgYWx3YXlzIHNldHMgdGhpcyBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgJ1JFVkFMSURBVEVEJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGN1cnJlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmZldGNoTWV0cmljcyA9IGNvbnRleHQucmVuZGVyT3B0cy5mZXRjaE1ldHJpY3M7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwZW5kaW5nV2FpdFVudGlsID0gY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWw7XG4gICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdXNpbmcgcHJvdmlkZWQgd2FpdFVudGlsIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCdzIG5vdCB3ZSBmYWxsYmFjayB0byBzZW5kUmVzcG9uc2UncyBoYW5kbGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ1dhaXRVbnRpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC53YWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgud2FpdFVudGlsKHBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdXYWl0VW50aWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVUYWdzID0gY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFRhZ3M7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpYyByZXNwb25zZSwgd2UgY2FuIGNhY2hlIGl0IHNvIGxvbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYXMgaXQncyBub3QgZWRnZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSXNyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29weSB0aGUgaGVhZGVycyBmcm9tIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlVGFncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl0gPSBjYWNoZVRhZ3M7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddICYmIGJsb2IudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gYmxvYi50eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV2YWxpZGF0ZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPj0gSU5GSU5JVEVfQ0FDSEUgPyBmYWxzZSA6IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwaXJlID0gdHlwZW9mIGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPj0gSU5GSU5JVEVfQ0FDSEUgPyB1bmRlZmluZWQgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjYWNoZSBlbnRyeSBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogQnVmZmVyLmZyb20oYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbmQgcmVzcG9uc2Ugd2l0aG91dCBjYWNoaW5nIGlmIG5vdCBJU1JcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIHJlc3BvbnNlLCBjb250ZXh0LnJlbmRlck9wdHMucGVuZGluZ1dhaXRVbnRpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgYmFja2dyb3VuZCByZXZhbGlkYXRlIHdlIG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXF1ZXN0IGVycm9yIGhlcmUgYXMgaXQgd29uJ3QgYmUgYnViYmxlZFxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNDYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2aW91c0NhY2hlRW50cnkuaXNTdGFsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVQYXRoOiBzcmNQYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSBhd2FpdCByb3V0ZU1vZHVsZS5oYW5kbGVSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgIG5leHRDb25maWcsXG4gICAgICAgICAgICAgICAgY2FjaGVLZXksXG4gICAgICAgICAgICAgICAgcm91dGVLaW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgIGlzRmFsbGJhY2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICAgICAgICAgIGlzUm91dGVQUFJFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlT25seUdlbmVyYXRlZCxcbiAgICAgICAgICAgICAgICByZXNwb25zZUdlbmVyYXRvcixcbiAgICAgICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgY3JlYXRlIGEgY2FjaGVFbnRyeSBmb3IgSVNSXG4gICAgICAgICAgICBpZiAoIWlzSXNyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGNhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZS5raW5kKSAhPT0gQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSkge1xuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTE7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YXJpYW50OiBhcHAtcm91dGUgcmVjZWl2ZWQgaW52YWxpZCBjYWNoZSBlbnRyeSAke2NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZTEgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUxLmtpbmR9YCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNzAxXCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgaXNPbkRlbWFuZFJldmFsaWRhdGUgPyAnUkVWQUxJREFURUQnIDogY2FjaGVFbnRyeS5pc01pc3MgPyAnTUlTUycgOiBjYWNoZUVudHJ5LmlzU3RhbGUgPyAnU1RBTEUnIDogJ0hJVCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRHJhZnQgbW9kZSBzaG91bGQgbmV2ZXIgYmUgY2FjaGVkXG4gICAgICAgICAgICBpZiAoaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3ByaXZhdGUsIG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMoY2FjaGVFbnRyeS52YWx1ZS5oZWFkZXJzKTtcbiAgICAgICAgICAgIGlmICghKGdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykgJiYgaXNJc3IpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5kZWxldGUoTkVYVF9DQUNIRV9UQUdTX0hFQURFUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBjYWNoZSBjb250cm9sIGlzIGFscmVhZHkgc2V0IG9uIHRoZSByZXNwb25zZSB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gb3ZlcnJpZGUgaXQgdG8gYWxsb3cgdXNlcnMgdG8gY3VzdG9taXplIGl0IHZpYSBuZXh0LmNvbmZpZ1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sICYmICFyZXMuZ2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJykgJiYgIWhlYWRlcnMuZ2V0KCdDYWNoZS1Db250cm9sJykpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIGdldENhY2hlQ29udHJvbEhlYWRlcihjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKGNhY2hlRW50cnkudmFsdWUuYm9keSwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBjYWNoZUVudHJ5LnZhbHVlLnN0YXR1cyB8fCAyMDBcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiBhY3RpdmVTcGFuIGNvZGUgcGF0aCBpcyBmb3Igd2hlbiB3cmFwcGVkIGJ5XG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxuICAgICAgICBpZiAoYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlUmVzcG9uc2UoYWN0aXZlU3Bhbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtyZXEudXJsfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlUmVzcG9uc2UpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoIShlcnIgaW5zdGFuY2VvZiBOb0ZhbGxiYWNrRXJyb3IpKSB7XG4gICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IG5vcm1hbGl6ZWRTcmNQYWdlLFxuICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXRocm93IHNvIHRoYXQgd2UgY2FuIGhhbmRsZSBzZXJ2aW5nIGVycm9yIHBhZ2VcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBkdXJpbmcgc3RhdGljIGdlbmVyYXRpb24sIHRocm93IHRoZSBlcnJvciBhZ2Fpbi5cbiAgICAgICAgaWYgKGlzSXNyKSB0aHJvdyBlcnI7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgc2VuZCBhIDUwMCByZXNwb25zZS5cbiAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgIHN0YXR1czogNTAwXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.ts&appDir=C%3A%5Cxampp%5Chtdocs%5Cgraky%20store%20web%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cxampp%5Chtdocs%5Cgraky%20store%20web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mysql2","vendor-chunks/aws-ssl-profiles","vendor-chunks/iconv-lite","vendor-chunks/@auth","vendor-chunks/bcryptjs","vendor-chunks/long","vendor-chunks/named-placeholders","vendor-chunks/next-auth","vendor-chunks/denque","vendor-chunks/is-property","vendor-chunks/lru.min","vendor-chunks/sqlstring","vendor-chunks/seq-queue","vendor-chunks/generate-function","vendor-chunks/safer-buffer","vendor-chunks/jose","vendor-chunks/oauth4webapi","vendor-chunks/preact","vendor-chunks/preact-render-to-string","vendor-chunks/@panva"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.ts&appDir=C%3A%5Cxampp%5Chtdocs%5Cgraky%20store%20web%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cxampp%5Chtdocs%5Cgraky%20store%20web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();